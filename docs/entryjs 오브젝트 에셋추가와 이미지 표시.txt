EntryJS ì˜¤ë¸Œì íŠ¸ ì—ì…‹ ì¶”ê°€ ë° ì´ë¯¸ì§€ í‘œì‹œ ì‘ì—… ëª…ì„¸ì„œ
ğŸ“Œ í”„ë¡œì íŠ¸ ê°œìš”

ëª©ì : Entry-tool íŒì—…ì—ì„œ ì˜¤ë¸Œì íŠ¸ ëª©ë¡ ë° ì´ë¯¸ì§€ê°€ ì •ìƒ í‘œì‹œë˜ë„ë¡ ìˆ˜ì •
í˜„ì¬ ìƒíƒœ: ì—”íŠ¸ë¦¬ë´‡ 1ê°œë§Œ í‘œì‹œ, ì´ë¯¸ì§€ ë¯¸í‘œì‹œ
ëª©í‘œ ìƒíƒœ: Entry ì˜¤í”„ë¼ì¸ ì—ë””í„°ì˜ ì „ì²´ ì˜¤ë¸Œì íŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ í†µí•©
ì‘ì—… ë²”ìœ„: 8070ë²ˆ EntryJS ì„œë²„ + Apache ì„¤ì •


ğŸ¯ ì‘ì—… ëª©í‘œ

Entry ì˜¤í”„ë¼ì¸ ì—ë””í„°ì˜ ì˜¤ë¸Œì íŠ¸ ì—ì…‹ í†µí•©
Entry-tool íŒì—…ì—ì„œ ëª¨ë“  ì˜¤ë¸Œì íŠ¸ í‘œì‹œ
ì˜¤ë¸Œì íŠ¸ ì´ë¯¸ì§€ ì •ìƒ ë¡œë”©
ì¹´í…Œê³ ë¦¬ë³„ í•„í„°ë§ ê¸°ëŠ¥ ë™ì‘


ğŸ“‚ Phase 1: ì—ì…‹ ìˆ˜ì§‘ ë° ë°°ì¹˜
1.1 ì˜¤í”„ë¼ì¸ ì—ë””í„° ì—ì…‹ ë‹¤ìš´ë¡œë“œ
bash# Entry ì˜¤í”„ë¼ì¸ ì—ë””í„° ë¦¬ì†ŒìŠ¤ ë‹¤ìš´ë¡œë“œ
# https://github.com/entrylabs/entry-offline/releases ì—ì„œ ìµœì‹  ë²„ì „ ë‹¤ìš´ë¡œë“œ
# ë˜ëŠ” ê¸°ì¡´ ì„¤ì¹˜ëœ ì˜¤í”„ë¼ì¸ ì—ë””í„°ì—ì„œ ì¶”ì¶œ

# Windows ê²½ë¡œ ì˜ˆì‹œ
C:\Program Files\Entry\resources\app\src\renderer\resources\

# í•„ìš”í•œ í´ë”
- db/           # JSON ë©”íƒ€ë°ì´í„°
- uploads/      # ì‹¤ì œ ì—ì…‹ íŒŒì¼
1.2 ì„œë²„ ë””ë ‰í† ë¦¬ êµ¬ì¡° ìƒì„±
bash# 8070ë²ˆ ì„œë²„ ì—ì…‹ ë””ë ‰í† ë¦¬ ìƒì„±
sudo mkdir -p /var/www/html/entry/resources/db
sudo mkdir -p /var/www/html/entry/resources/uploads

# ê¶Œí•œ ì„¤ì •
sudo chown -R ubuntu:ubuntu /var/www/html/entry/resources
1.3 ì—ì…‹ íŒŒì¼ ë³µì‚¬
bash# db í´ë” ë³µì‚¬ (JSON ë©”íƒ€ë°ì´í„°)
cp -r [ì˜¤í”„ë¼ì¸ì—ë””í„°]/db/* /var/www/html/entry/resources/db/

# uploads í´ë” ë³µì‚¬ (ì´ë¯¸ì§€/ì‚¬ìš´ë“œ íŒŒì¼)
cp -r [ì˜¤í”„ë¼ì¸ì—ë””í„°]/uploads/* /var/www/html/entry/resources/uploads/

# í•„ìˆ˜ JSON íŒŒì¼ í™•ì¸
ls -la /var/www/html/entry/resources/db/
# objects.json, pictures.json, sounds.json í™•ì¸

ğŸ“‚ Phase 2: Apache ì„¤ì • ìˆ˜ì •
2.1 Apache Alias ì¶”ê°€
íŒŒì¼: /etc/apache2/sites-available/000-default.conf
apache# Entry ì˜¤ë¸Œì íŠ¸ ì—ì…‹ ì„œë¹™ ì¶”ê°€
Alias /resources/uploads /var/www/html/entry/resources/uploads
<Directory "/var/www/html/entry/resources/uploads">
    Options FollowSymLinks
    AllowOverride None
    Require all granted
    Header always set Access-Control-Allow-Origin "*"
    Header always set Cache-Control "public, max-age=3600"
</Directory>

# JSON ë°ì´í„° ì„œë¹™
Alias /resources/db /var/www/html/entry/resources/db
<Directory "/var/www/html/entry/resources/db">
    Options FollowSymLinks
    AllowOverride None
    Require all granted
    Header always set Access-Control-Allow-Origin "*"
    Header always set Content-Type "application/json"
</Directory>

# í”„ë¡ì‹œ ì˜ˆì™¸ ì„¤ì •
ProxyPass /resources !
2.2 Apache ì¬ì‹œì‘
bashsudo apache2ctl configtest
sudo systemctl reload apache2

ğŸ“‚ Phase 3: EntryJS ì½”ë“œ ìˆ˜ì •
3.1 index.html ìˆ˜ì •
íŒŒì¼: /var/www/html/entry/index.html
Entry ì´ˆê¸°í™” ì˜µì…˜ì— ê²½ë¡œ ì¶”ê°€:
javascriptvar initOption = {
    type: 'workspace',
    libDir: '/lib',
    defaultDir: '/resources',               // ì¶”ê°€
    mediaFilePath: '/resources/uploads/',   // ì¶”ê°€
    // ê¸°ì¡´ ì˜µì…˜ë“¤...
};
3.2 app.mjs ìˆ˜ì •
íŒŒì¼: /var/www/html/entry/js/app.mjs
ì´ˆê¸°í™” ì˜µì…˜ ìˆ˜ì •:
javascriptvar initOption = {
    type: 'workspace',
    textCodingEnable: true,
    defaultDir: '/resources',               // ì¶”ê°€
    mediaFilePath: '/resources/uploads/',   // ì¶”ê°€
    soundDir: '/resources/uploads/',        // ì¶”ê°€
    // ê¸°ì¡´ ì˜µì…˜ë“¤...
};
3.3 mock.mjs êµì²´
íŒŒì¼: /var/www/html/entry/js/mock.mjs
javascript// ê¸°ì¡´ í•˜ë“œì½”ë”© ë°ì´í„°ë¥¼ ì‹¤ì œ JSON ë¡œë“œë¡œ ë³€ê²½
let spriteData = [];
let pictureData = [];
let soundData = [];

// JSON ë°ì´í„° ë¡œë“œ í•¨ìˆ˜
async function loadEntryResources() {
    try {
        // objects.json ë¡œë“œ
        const objectsResponse = await fetch('/resources/db/objects.json');
        const objects = await objectsResponse.json();
        
        // pictures.json ë¡œë“œ
        const picturesResponse = await fetch('/resources/db/pictures.json');
        const pictures = await picturesResponse.json();
        
        // sounds.json ë¡œë“œ
        const soundsResponse = await fetch('/resources/db/sounds.json');
        const sounds = await soundsResponse.json();
        
        // ë°ì´í„° ë³€í™˜ ë° ì €ì¥
        spriteData = processObjectsData(objects);
        pictureData = processPicturesData(pictures);
        soundData = processSoundsData(sounds);
        
        console.log('âœ… Entry ë¦¬ì†ŒìŠ¤ ë¡œë“œ ì™„ë£Œ:', {
            sprites: spriteData.length,
            pictures: pictureData.length,
            sounds: soundData.length
        });
    } catch (error) {
        console.error('âŒ Entry ë¦¬ì†ŒìŠ¤ ë¡œë“œ ì‹¤íŒ¨:', error);
    }
}

// ë°ì´í„° ì²˜ë¦¬ í•¨ìˆ˜
function processObjectsData(objects) {
    return objects.map(obj => ({
        ...obj,
        // ì´ë¯¸ì§€ ê²½ë¡œ ë³€í™˜
        pictures: obj.pictures?.map(pic => ({
            ...pic,
            fileurl: generateImagePath(pic.filename, pic.imageType || 'png'),
            thumbUrl: generateThumbPath(pic.filename, pic.imageType || 'png')
        }))
    }));
}

function generateImagePath(filename, imageType) {
    if (!filename) return '';
    const folder = `${filename.substr(0,2)}/${filename.substr(2,2)}`;
    return `/resources/uploads/${folder}/image/${filename}.${imageType}`;
}

function generateThumbPath(filename, imageType) {
    if (!filename) return '';
    const folder = `${filename.substr(0,2)}/${filename.substr(2,2)}`;
    return `/resources/uploads/${folder}/thumb/${filename}.${imageType}`;
}

// í˜ì´ì§€ ë¡œë“œ ì‹œ ì‹¤í–‰
loadEntryResources();

// Export ìˆ˜ì •
export const assets = {
    get sprite() { return spriteData; },
    get picture() { return pictureData; },
    get sound() { return soundData; }
};
3.4 sprite.mjs ìˆ˜ì •
íŒŒì¼: /var/www/html/entry/js/popup/sprite.mjs
javascriptexport function setSpritePopupEvent(popup) {
    popup.on('fetch', async (category) => {
        try {
            const { sidebar, subMenu } = category;
            console.log('ğŸ­ ìŠ¤í”„ë¼ì´íŠ¸ í˜ì¹˜ ìš”ì²­:', { sidebar, subMenu });
            
            // mock.mjsì—ì„œ ë¡œë“œëœ ë°ì´í„° ì‚¬ìš©
            const { assets } = await import('../mock.mjs');
            let data = assets.sprite || [];
            
            // ì¹´í…Œê³ ë¦¬ í•„í„°ë§
            if (sidebar && sidebar !== 'all') {
                data = data.filter(item => 
                    item.category?.main === sidebar ||
                    item.category?.sub === sidebar
                );
            }
            
            console.log('âœ… ìŠ¤í”„ë¼ì´íŠ¸ ë°ì´í„°:', data.length);
            popup.setData({ 
                data: { 
                    data: data,
                    imageBaseUrl: '/resources/uploads/'
                } 
            });
        } catch (error) {
            console.error('âŒ ìŠ¤í”„ë¼ì´íŠ¸ í˜ì¹˜ ì˜¤ë¥˜:', error);
            popup.setData({ data: { data: [] } });
        }
    });
    
    // ë‚˜ë¨¸ì§€ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ëŠ” ìœ ì§€...
}
3.5 popup/index.mjs ìˆ˜ì •
íŒŒì¼: /var/www/html/entry/js/popup/index.mjs
javascriptexport async function openSpriteManager() {
    popup.removeAllListeners();
    setSpritePopupEvent(popup);
    
    // ì¹´í…Œê³ ë¦¬ ë°ì´í„° ë¡œë“œ
    const categoriesResponse = await fetch('/resources/db/categories.json')
        .catch(() => ({ json: () => [] }));
    const categories = await categoriesResponse.json();
    
    // ì¹´í…Œê³ ë¦¬ê°€ ì—†ìœ¼ë©´ ê¸°ë³¸ê°’ ì‚¬ìš©
    const sidebar = categories.length > 0 ? 
        getSidebarTemplate({ category: categories }) :
        getSidebarTemplate({ category: spriteCategory });
    
    popup.setData({ 
        sidebar,
        imageBaseUrl: '/resources/uploads/'
    });
    popup.show({ type: 'sprite' }, {});
}

ğŸ“‚ Phase 4: í…ŒìŠ¤íŠ¸ ë° ê²€ì¦
4.1 ì—ì…‹ ë¡œë”© í…ŒìŠ¤íŠ¸
bash# JSON íŒŒì¼ ì ‘ê·¼ í…ŒìŠ¤íŠ¸
curl http://localhost:8070/resources/db/objects.json | head

# ì´ë¯¸ì§€ íŒŒì¼ ì ‘ê·¼ í…ŒìŠ¤íŠ¸ (ì˜ˆì‹œ)
curl -I http://localhost:8070/resources/uploads/60/62/image/6062xxx.png
4.2 ë¸Œë¼ìš°ì € ì½˜ì†” í…ŒìŠ¤íŠ¸
javascript// Entry ë¦¬ì†ŒìŠ¤ ë¡œë“œ í™•ì¸
fetch('/resources/db/objects.json')
    .then(r => r.json())
    .then(data => console.log('Objects:', data.length));

// ì´ë¯¸ì§€ ê²½ë¡œ í…ŒìŠ¤íŠ¸
const testImage = new Image();
testImage.src = '/resources/uploads/60/62/image/[ì‹¤ì œíŒŒì¼ëª…].png';
testImage.onload = () => console.log('âœ… ì´ë¯¸ì§€ ë¡œë“œ ì„±ê³µ');
testImage.onerror = () => console.log('âŒ ì´ë¯¸ì§€ ë¡œë“œ ì‹¤íŒ¨');
4.3 íŒì—… ë™ì‘ í…ŒìŠ¤íŠ¸

EntryJS ì›Œí¬ìŠ¤í˜ì´ìŠ¤ ë¡œë“œ
"ì˜¤ë¸Œì íŠ¸ ì¶”ê°€í•˜ê¸°" ë²„íŠ¼ í´ë¦­
íŒì—…ì— ì˜¤ë¸Œì íŠ¸ ëª©ë¡ í‘œì‹œ í™•ì¸
ì˜¤ë¸Œì íŠ¸ ì´ë¯¸ì§€ í‘œì‹œ í™•ì¸
ì¹´í…Œê³ ë¦¬ í•„í„°ë§ ë™ì‘ í™•ì¸


ğŸ”§ Phase 5: ë¬¸ì œ í•´ê²°
5.1 ì´ë¯¸ì§€ê°€ ì•ˆ ë³´ì´ëŠ” ê²½ìš°

Apache ë¡œê·¸ í™•ì¸: sudo tail -f /var/log/apache2/error.log
íŒŒì¼ ê²½ë¡œ ë° ê¶Œí•œ í™•ì¸
ë¸Œë¼ìš°ì € ê°œë°œì ë„êµ¬ Network íƒ­ì—ì„œ 404 ì˜¤ë¥˜ í™•ì¸

5.2 JSON ë¡œë“œ ì‹¤íŒ¨

CORS í—¤ë” í™•ì¸
Content-Type í—¤ë” í™•ì¸
íŒŒì¼ ê¶Œí•œ í™•ì¸

5.3 ì¹´í…Œê³ ë¦¬ê°€ ì•ˆ ë³´ì´ëŠ” ê²½ìš°

categories.json íŒŒì¼ ìƒì„± í•„ìš”
sidebar ë°ì´í„° êµ¬ì¡° í™•ì¸


ğŸ“Š ì˜ˆìƒ ê²°ê³¼
ì„±ê³µ ì§€í‘œ

âœ… ì˜¤ë¸Œì íŠ¸ íŒì—…ì— 100ê°œ ì´ìƒ ì˜¤ë¸Œì íŠ¸ í‘œì‹œ
âœ… ëª¨ë“  ì˜¤ë¸Œì íŠ¸ ì´ë¯¸ì§€ ì •ìƒ í‘œì‹œ
âœ… ì¹´í…Œê³ ë¦¬ë³„ í•„í„°ë§ ë™ì‘
âœ… ì˜¤ë¸Œì íŠ¸ ì¶”ê°€ ì‹œ ì›Œí¬ìŠ¤í˜ì´ìŠ¤ì— ì •ìƒ ì¶”ê°€

íŒŒì¼ êµ¬ì¡° ìµœì¢… ìƒíƒœ
/var/www/html/entry/
â”œâ”€â”€ resources/
â”‚   â”œâ”€â”€ db/
â”‚   â”‚   â”œâ”€â”€ objects.json      # ì˜¤ë¸Œì íŠ¸ ë©”íƒ€ë°ì´í„°
â”‚   â”‚   â”œâ”€â”€ pictures.json     # ì´ë¯¸ì§€ ë©”íƒ€ë°ì´í„°
â”‚   â”‚   â””â”€â”€ sounds.json       # ì‚¬ìš´ë“œ ë©”íƒ€ë°ì´í„°
â”‚   â””â”€â”€ uploads/
â”‚       â”œâ”€â”€ [í•´ì‹œ]/[í•´ì‹œ]/image/   # ì‹¤ì œ ì´ë¯¸ì§€ íŒŒì¼
â”‚       â”œâ”€â”€ [í•´ì‹œ]/[í•´ì‹œ]/thumb/   # ì¸ë„¤ì¼ íŒŒì¼
â”‚       â””â”€â”€ [í•´ì‹œ]/[í•´ì‹œ]/sound/   # ì‚¬ìš´ë“œ íŒŒì¼
â””â”€â”€ js/
    â”œâ”€â”€ mock.mjs              # ìˆ˜ì •ë¨: JSON ë¡œë“œ
    â””â”€â”€ popup/
        â””â”€â”€ sprite.mjs        # ìˆ˜ì •ë¨: ë¡œì»¬ ë°ì´í„° ì‚¬ìš©

ì‘ì„±ì: AI Assistant
ì‘ì„±ì¼: 2025ë…„ 1ì›”
ìƒíƒœ: êµ¬í˜„ ì¤€ë¹„ ì™„ë£Œ