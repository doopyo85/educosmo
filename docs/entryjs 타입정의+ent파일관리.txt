Init Options
Entry.init 함수를 호출할 때 전달되는 옵션 객체입니다. 이 객체를 통해 개발자는 Entry 워크스페이스의 초기 설정 값을 정의하고, 워크스페이스가 로드될 때 필요한 다양한 환경 설정을 커스터마이즈할 수 있습니다.

프로퍼티	타입	설명
type	‘workspace’|’minimize’	entryjs를 띄울 기본형식. ‘’
libDir	string	써드파티 라이브러리 저장소. entryjs를 포함한 Library 위치. (기본값: ‘/lib’)
entryDir	string	엔트리 mediaFile asset이 지정된 위치 (기본값: ‘/@entrylabs/entry’)
defaultDir	string	기본 assets이 지정된 위치
soundDir	string	sound 파일이 들어 있는 고유한 path
baseUrl	string	API블록, AI블록등을 호출한 원본 API주소
fonts	Array	웹폰트 정보
objectAddable	boolean	오브젝트 추가가능 여부 (true)
objectEditable	boolean	오브젝트 수정가능 여부 (true). 이값을 false로 세팅하면 objectAddable도 false가 된다.
objectdeletable	boolean	오브젝트 삭제가능 여부 (true)
soundeditable	boolean	소리 수정가능 여부 (true)
pictureeditable	boolean	모양 수정가능 여부 (true)
sceneEditable	boolean	장면 수정가능 여부 (true)
functionEnable	boolean	함수 사용가능 여부 (true)
messageEnable	boolean	신호 사용가능 여부 (true)
variableEnable	boolean	변수 사용가능 여부 (true)
listEnable	boolean	리스트 사용가능 여부 (true)
aiLearningEnable	boolean	AI 사용가능 여부 (true)
isForLecture	boolean	강의용 프로젝트 여부 (false)
textCodingEnable	boolean	엔트리 파이선 사용가능 여부 (true)
hardwareEnable	boolean	하드웨어 사용가능 여부 (true)
expansionDisable	boolean	확장블록 사용가능 여부 (true)
aiUtilizeDisable	boolean	인공지능블록 사용가능 여부 (true)
blockSaveImageEnable	boolean	블록 이미지로 저장하기 사용가능 여부 (true)
Caught a mistake or want to contribute to the documentation? Edit this page on Github!


Function Data
프로젝트 내에서 정의된 모든 사용자 정의 함수에 대한 상세 정보를 포함합니다.

프로퍼티	타입	설명
id	Function ID	함수 ID
content	string	함수 블록 스크립트
type	‘normal’|’value’	함수의 타입
‘normal’:기본
‘value’:값 블록
useLocalVariables	boolean	지역 변수 사용여부
localVariables	Local Variable Data	지역 변수 데이터

Interface State
사용자 인터페이스(UI)의 현재 상태와 구성을 설명하는 데이터입니다.

프로퍼티	타입	설명
canvasWidth	number	스테이지 영역의 width
menuWidth	number	블록 메뉴 영역의 width
object	Object ID	현재 선택중인 Object ID

Message Data
프로젝트 내에서 정의되고 사용된 신호(메시지)에 대한 정보를 담고 있습니다.

프로퍼티	타입	설명
id	Message ID	신호 ID
name	string	신호명

Object Data
프로젝트 내에 사용된 개별 오브젝트에 대한 상세 정보를 포함합니다. 각 오브젝트 데이터는 그 오브젝트의 유형, 상태, 위치, 모양, 사용된 스크립트(블록 코드) 등 오브젝트를 완전히 기술하는 데 필요한 모든 정보를 담고 있어, 프로젝트를 재구성하거나 수정할 때 기반이 됩니다.

프로퍼티	타입	설명
id	Object ID	오브젝트 ID
name	string	오브젝트 이름
text	string	글상자 내용
objectType	‘sprite’|’textBox’	오브젝트 유형
scene	scene ID	장면 ID
lock	boolean	오브젝트 잠금 여부
rotateMethod	‘free’|’vertical’|’none’	회전방식
entity	Entity Data	엔티티 정보
script	string	블록 스크립트
sprite	Sprite Data	스프라이트 정보
selectedPictureId	Picture ID	현재 활성화된 모양의 ID


Project Data
EntryJS 워크스페이스에서 작업한 프로젝트의 전체 구성과 상태를 포함하는 JSON 형식의 데이터입니다. 이 데이터는 프로젝트의 블록 구성, 사용된 객체, 스크립트, 설정 등 프로젝트를 구성하는 요소에 대한 정보를 담고 있어, 프로젝트를 저장하고, 불러오고, 공유하는 데 사용됩니다.

프로퍼티	타입	설명
speed	number	작품 실행 속도(FPS)
objects	Object Data[]	오브젝트 정보
variables	Variable Data[]	변수 정보
messages	Message Data[]	신호 정보
functions	Functions Data[]	함수 정보
scenes	Scene Data[]	장면 정보
interface	interfaceState[]	인터페이스 정보
tables	Table Data[]	데이터 테이블 목록
learning	ID	학습 모델 ID
aiUtilizeBlocks	string[]	AI 블록 목록
expansionBlocks	string[]	확장 블록 목록
hardwareLiteBlocks	string[]	브라우저 하드웨어 블록 목록

Scene Data
프로젝트 내에서 사용된 모든 장면(Scene)에 대한 상세 정보를 포함합니다.

프로퍼티	타입	설명
id	Scene ID	장면 ID
name	string	장면 이름


Table Data
테이블(데이터 테이블)에 대한 정보를 포함합니다.

프로퍼티	타입	설명
id	Table ID	테이블 ID
name	string	테이블 이름
fields	string[]	테이블 column 데이터
data	Table data[]	테이블 데이터
origin	Origin data[]	원본 데이터
chart	Chart data	차트 데이터
summary	string	요약


Variable Data
프로젝트 내에서 사용되는 모든 변수의 상태와 속성을 기술합니다. 이 데이터는 프로젝트에서 정의된 각 변수의 이름, 타입, 초기값, 그리고 변수가 사용되는 범위 등을 포함합니다.

프로퍼티	타입	설명
id	Variable ID	변수 ID
variableType	‘variable’|’list’|’timer’|’answer’|’slide’	변수형
name	string	변수명
value	string	변수 값
minValue	number	최솟 값
maxValue	number	최댓 값
visible	boolean	캔버스에 표시여부
x	number	캔버스 위치 x좌표
y	number	캔버스 위치 y좌표
width	number	넓이
height	number	높이
isCloud	boolean	공유변수 여부
object	Object ID	지역 변수일때 참조하는 오브젝트 ID
array	Array Data	변수형이 list일 경우 값 목록


ENT파일 관리
소개
내 컴퓨터에 저장하기 기능은 사용자가 자신의 작품을 컴퓨터에 저장할 수 있도록 지원합니다. 이 기능은 작품의 JSON 데이터를 기반으로 필요한 assets 파일을 수집하고, 이를 하나의 압축 파일로 묶어 제공합니다. 최종적으로 생성된 파일은 .ent 확장자를 가지며, 사용자는 이를 다운로드하여 로컬 환경에서 쉽게 사용할 수 있습니다.

프로젝트 데이터
프로젝트 JSON
프로젝트 JSON 데이터 생성은 Entry.getStartProject() 메서드를 사용하여 이루어집니다. 이 메서드는 현재 프로젝트의 모든 데이터를 JSON 형식으로 내보냅니다.

Project Data

프로젝트 에셋
프로젝트 JSON에 에셋의 경로가 포함되어 있으며, 해당 경로의 에셋들을 모아 압축 파일로 만들게 됩니다.

.ent
현재 .ent파일은 tar를 사용하여 압축을 진행하여 만들고 있으며 memLevel은 6을 사용하고 있습니다.

엔트리에서는 tar 패키지를 사용하고 있습니다.

파일의 구조
project.ent
│
└── temp                    # 프로젝트에 사용된 모든 에셋 파일들이 포함된 디렉토리
    │
    ├── project.json        # 프로젝트의 전체 데이터를 포함하는 JSON 파일
    │
    ├── 0a                  # assets의 폴더
    ...                     # ...
    └── fd                  # assets의 폴더
기본적으로 제일 상위의 temp 폴더가 있고 그 아래에 project.json과 에셋 폴더가 존재하는 방식입니다.
자세히 살펴보려 하신다면 기본적으로 .ent파일은 tar로 압축된 파일이기때문에 tar로 압축해제가 가능합니다.
이를 통해 내용을 확인하시면 됩니다.

압축하기
기본적으로 프로젝트 JSON의 object에 파일의 경로가 다 남아 있으므로
해당 경로를 통해서 파일을 temp폴더에 복사하고 tar로 작성하시면 됩니다.

엔트리에서는 압축시 tar를 아래와 같이 사용중입니다.

await tar.c(
    {
        file: destination, /* 파일 경로 */,
        gzip: { memLevel: 6 },
        cwd, /* 작업 위치 */
        filter: (path, stat) => {
            try {
                return !stat.isSymbolicLink();
            } catch (e) {
                return false;
            }
        },
        portable: true,
    },
    [fileList] /* temp 폴더 */
);
압축풀기
이제는 반대로 tar를 통해 압축을 풀고 풀어진 에셋을 정해진 위치에 넣고, project.json을 db에 넣어주면 됩니다.

엔트리에서는 압축 해제시 tar를 아래와 같이 사용중입니다.

await tar.x({
    file: target, /* .ent파일 경로 */
    cwd: destination, /* 압축해제 경로 */
    filter: (path, entry) => {
        const { type, size } = entry;
        return type !== 'SymbolicLink' && maxSize > size && checkExtName(entry);
    },
})
주의사항
.ent파일로 만드시고 playentry.org사이트에도 동일하게 사용을 하기 원하신다면 폴더 구조를 맞춰 주셔야 합니다.
현재 엔트리에서는 기본적으로 assets을 아래과 같은 형식으로 관리하고 있습니다.

에셋의 파일이름
모든파일의 이름은 난수값의 이름으로 만들고 있습니다. 이때 uid와 puid를 혼합해서 생성하고 있습니다.

const { uid } = require('uid');
const Puid = require('puid');
const puid = new Puid();
const createFileId = () => uid(8) + puid.generate();
기본적으로 만들어진 fileId에서 앞의 4자를 이용해서 하위 폴더를 생성하는 방식입니다.
만들어진 fileId가 e49448cdlyy4s42e0013f820158i7nqj인 경우
/e4/94/ 으로 앞의 2자 그 뒤의 2자로 폴더를 생성하고 assets을 그 안에 넣습니다.

이미지
image라는 폴더명으로 구분됩니다.

만들어진 fileId가 e49448cdlyy4s42e0013f820158i7nqj인 경우 /e4/94/image/e49448cdlyy4s42e0013f820158i7nqj.png

썸네일
thumb라는 폴더명으로 구분됩니다.

만들어진 fileId가 e49448cdlyy4s42e0013f820158i7nqj인 경우 /e4/94/thumb/e49448cdlyy4s42e0013f820158i7nqj.png

사운드
sound라는 폴더명으로 구분됩니다.

만들어진 fileId가 e49448cdlyy4s42e0013f820158i7nqj인 경우 /e4/94/sound/e49448cdlyy4s42e0013f820158i7nqj.mp3

경로가 다를 경우
작업한 서버의 상황에 따라 엔트리와 파일경로 방식이 불일치해서 .ent가 호환이 안되는 경우 아래와 같은 방식으로 교정이 반드시 필요합니다.

작업할 project.json과 assets들을 temp폴더에 복사
.ent파일을 만들때 프로젝트 JSON에 기록된 assets의 경로를 Entry와 동일하게 치환합니다.(이때 createFileId를 사용)
JSON데이터를 치환함과 동시에 실제 assets의 경로도 동일하게 변경
해당 assets과 project.json을 tar로 압축
과 같은 과정을 거쳐야 하고, 반대로 .ent파일을 작품으로 저장해야 할경우

.ent파일의 압축을 푼다.
project.json의 assets 경로를 서버의 환경에 맞게 치환한다.
이때 실제의 assets들의 경로도 변경한다.
해당 assets을 실제의 위치에 복사하고, project.json의 데이터를 db에 저장한다.
와 같은 과정으로 저장해야 합니다.