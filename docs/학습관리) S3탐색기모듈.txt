ğŸ“ S3 íƒìƒ‰ê¸° ëª¨ë“ˆ ê¸°ëŠ¥ ëª…ì„¸ì„œ
í”„ë¡œì íŠ¸ëª…: educodingnplay - í†µí•© S3 íŒŒì¼ ê´€ë¦¬ ì‹œìŠ¤í…œ
ì‘ì„±ì¼: 2025ë…„ 1ì›” 3ì¼
ë²„ì „: 1.0
ì‘ì„±ì: AI Assistant & ê°œë°œíŒ€

ğŸ“‹ ëª©ì°¨

ê°œìš”
ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜
ì‚¬ìš©ì ì—­í•  ë° ê¶Œí•œ
ì£¼ìš” ê¸°ëŠ¥
UI/UX ì„¤ê³„
API ëª…ì„¸
íŒŒì¼ êµ¬ì¡°
ë°ì´í„°ë² ì´ìŠ¤
ë³´ì•ˆ
í–¥í›„ ê°œì„ ì‚¬í•­


1. ê°œìš”
1.1 í”„ë¡œì íŠ¸ ëª©ì 
educodingnplay í”Œë«í¼ì—ì„œ í•™ìƒ, êµì‚¬, ê´€ë¦¬ìê°€ AWS S3ì— ì €ì¥ëœ í•™ìŠµ ìë£Œ ë° í”„ë¡œì íŠ¸ íŒŒì¼ì„ íš¨ìœ¨ì ìœ¼ë¡œ ê´€ë¦¬í•  ìˆ˜ ìˆëŠ” í†µí•© íŒŒì¼ íƒìƒ‰ê¸° ì‹œìŠ¤í…œ êµ¬ì¶•
1.2 í•µì‹¬ ê°€ì¹˜

ì—­í•  ê¸°ë°˜ ì ‘ê·¼ ì œì–´: 7ë‹¨ê³„ ê¶Œí•œ ì‹œìŠ¤í…œìœ¼ë¡œ ë°ì´í„° ë³´ì•ˆ ê°•í™”
ì‚¬ìš©ì ê²©ë¦¬: í•™ìƒë³„ ë…ë¦½ëœ í´ë” êµ¬ì¡°ë¡œ ê°œì¸ì •ë³´ ë³´í˜¸
ì§ê´€ì  UI: Windows íƒìƒ‰ê¸° ìŠ¤íƒ€ì¼ì˜ ì¹œìˆ™í•œ ì¸í„°í˜ì´ìŠ¤
í”Œë«í¼ í†µí•©: Entry, Scratch ì—ë””í„°ì™€ ì›í´ë¦­ ì—°ë™

1.3 ê¸°ìˆ  ìŠ¤íƒ
êµ¬ë¶„ê¸°ìˆ FrontendJavaScript (ES6+), Bootstrap 5, Bootstrap IconsBackendNode.js, Express.jsStorageAWS S3DatabaseMySQL (ì‚¬ìš©ì ì •ë³´)SessionRedis (ì„¸ì…˜ ì €ì¥ì†Œ)AuthenticationExpress Session + JWT

2. ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜
2.1 ì „ì²´ êµ¬ì¡°ë„
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Client Layer                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Header Component (Global Navigation)        â”‚   â”‚
â”‚  â”‚  â””â”€ "ë‚´ íŒŒì¼" í´ë¦­ -> í˜ì´ì§€ ì´ë™ (/s3/my-files) â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  S3Explorer Component (JavaScript Class)     â”‚   â”‚
â”‚  â”‚  â€¢ í´ë” íŠ¸ë¦¬ (ì™¼ìª½)                          â”‚   â”‚
â”‚  â”‚  â€¢ íŒŒì¼ ëª©ë¡ (ì˜¤ë¥¸ìª½)                        â”‚   â”‚
â”‚  â”‚  â€¢ Breadcrumb ë„¤ë¹„ê²Œì´ì…˜                     â”‚   â”‚
â”‚  â”‚  â€¢ ë“œë˜ê·¸ ì•¤ ë“œë¡­ ì—…ë¡œë“œ                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†• HTTP/HTTPS
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Server Layer (Express)             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  s3Router.js (í†µí•© ë¼ìš°í„°)                   â”‚   â”‚
â”‚  â”‚  â€¢ GET /s3/browser (ê³µí†µ)                    â”‚   â”‚
â”‚  â”‚  â€¢ GET /s3/my-files (í•™ìƒ)                   â”‚   â”‚
â”‚  â”‚  â€¢ GET /s3/student-files (êµì‚¬)              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  apiRouter.js (S3 API)                       â”‚   â”‚
â”‚  â”‚  â€¢ GET /api/s3/browse                        â”‚   â”‚
â”‚  â”‚  â€¢ GET /api/s3/download                      â”‚   â”‚
â”‚  â”‚  â€¢ POST /api/s3/upload                       â”‚   â”‚
â”‚  â”‚  â€¢ DELETE /api/s3/delete                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†• AWS SDK
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Storage Layer                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  AWS S3 Bucket                               â”‚   â”‚
â”‚  â”‚  educodingnplaycontents                      â”‚   â”‚
â”‚  â”‚                                              â”‚   â”‚
â”‚  â”‚  users/                                      â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€ student1/                               â”‚   â”‚
â”‚  â”‚  â”‚   â”œâ”€â”€ entry/draft/                        â”‚   â”‚
â”‚  â”‚  â”‚   â”œâ”€â”€ entry/final/                        â”‚   â”‚
â”‚  â”‚  â”‚   â”œâ”€â”€ scratch/draft/                      â”‚   â”‚
â”‚  â”‚  â”‚   â””â”€â”€ scratch/final/                      â”‚   â”‚
â”‚  â”‚  â””â”€â”€ student2/...                            â”‚   â”‚
â”‚  â”‚                                              â”‚   â”‚
â”‚  â”‚  sb3/ (ê³µìœ  ìŠ¤í¬ë˜ì¹˜ íŒŒì¼)                   â”‚   â”‚
â”‚  â”‚  ent/ (ê³µìœ  ì—”íŠ¸ë¦¬ íŒŒì¼)                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 ë°ì´í„° íë¦„
```
1. ì‚¬ìš©ì í´ë¦­ "ë‚´ íŒŒì¼" ì•„ì´ì½˜
   â†“
2. header.ejs â†’ /s3/my-files (ë˜ëŠ” ì—­í• ë³„ URL)ë¡œ ì´ë™
   â†“
3. ì—­í• ë³„ ê²½ë¡œ ìë™ ì„ íƒ
   â€¢ admin â†’ /s3/browser
   â€¢ teacher â†’ /s3/student-files
   â€¢ student â†’ /s3/my-files
   â†“
4. s3Router.js â†’ ì—­í•  ê²€ì¦ ë° ì„¤ì •
   â†“
5. s3-browser.ejs ë Œë”ë§ (Full Page with Header)
   â†“
6. S3Explorer.js ì´ˆê¸°í™”
   â€¢ scope, enableDelete ìë™ ì„¤ì •
   â€¢ ì´ˆê¸° ê²½ë¡œ ë¡œë“œ
   â†“
7. GET /api/s3/browse?prefix=users/student1/
   â†“
8. AWS S3 ListObjectsV2Command ì‹¤í–‰
   â†“
9. íŒŒì¼/í´ë” ëª©ë¡ ë°˜í™˜ (JSON)
   â†“
10. S3Explorer â†’ UI ë Œë”ë§

3. ì‚¬ìš©ì ì—­í•  ë° ê¶Œí•œ
3.1 ê¶Œí•œ ë§¤íŠ¸ë¦­ìŠ¤
ì—­í• ì ‘ê·¼ ë²”ìœ„ì—…ë¡œë“œì‚­ì œEntry/Scratch ì—´ê¸°Root ì ‘ê·¼adminì „ì²´ (all)âœ…âœ…âœ…âœ…managerì„¼í„° í•™ìƒ (center)âœ…âœ…âœ…âŒteacherì„¼í„° í•™ìƒ (center)âœ…âœ…âœ…âŒstudentë³¸ì¸ (self)âœ…âœ…âœ…âŒschoolì†Œì† í•™ìƒ (center)âŒâŒâœ…âŒkinderì†Œì† í•™ìƒ (center)âŒâŒâœ…âŒguestì ‘ê·¼ ë¶ˆê°€âŒâŒâŒâŒ
3.2 ì´ˆê¸° ê²½ë¡œ ì„¤ì •
javascript// s3Router.js - ì—­í• ë³„ ìë™ ì„¤ì •
switch(role) {
  case 'admin':
    scope = 'all';
    enableDelete = true;
    ì´ˆê¸°ê²½ë¡œ = '';  // Rootë¶€í„° ì‹œì‘
    break;
    
  case 'manager':
  case 'teacher':
    scope = 'center';
    enableDelete = true;
    ì´ˆê¸°ê²½ë¡œ = 'users/';  // users í´ë”ë¶€í„°
    break;
    
  case 'student':
    scope = 'self';
    enableDelete = true;
    ì´ˆê¸°ê²½ë¡œ = `users/${userID}/`;  // ë³¸ì¸ í´ë”ë§Œ
    break;
    
  case 'school':
  case 'kinder':
    scope = 'center';
    enableDelete = false;  // ì¡°íšŒë§Œ ê°€ëŠ¥
    ì´ˆê¸°ê²½ë¡œ = 'users/';
    break;
    
  default:
    // guestëŠ” ì ‘ê·¼ ì°¨ë‹¨
    return 403 Forbidden;
}
3.3 ê²½ë¡œ ì ‘ê·¼ ì œì–´
javascript// S3Explorer.js - isPathAllowed()
isPathAllowed(path) {
  // Adminì€ ëª¨ë“  ê²½ë¡œ í—ˆìš©
  if (this.config.userRole === 'admin') {
    return true;
  }
  
  // Root ê²½ë¡œ ì°¨ë‹¨ (ë¹„admin)
  if (!path || path === '' || path === '/') {
    return false;
  }
  
  // Teacher/Manager: users/ í•˜ìœ„ë§Œ
  if (['teacher', 'manager'].includes(this.config.userRole)) {
    return path.startsWith('users/');
  }
  
  // Student: ë³¸ì¸ í´ë”ë§Œ
  if (this.config.userRole === 'student') {
    return path.startsWith(`users/${this.config.userID}/`);
  }
  
  return false;
}
```

---

## 4. ì£¼ìš” ê¸°ëŠ¥

### 4.1 íŒŒì¼ íƒìƒ‰ ê¸°ëŠ¥

#### 4.1.1 í´ë” íŠ¸ë¦¬ (ì¢Œì¸¡)

**ê¸°ëŠ¥:**
- í˜„ì¬ ê²½ë¡œì˜ í•˜ìœ„ í´ë” ëª©ë¡ í‘œì‹œ
- ë¹ˆ í´ë” í‘œì‹œ (íšŒìƒ‰ "(ë¹„ì–´ìˆìŒ)" ë±ƒì§€)
- í•œê¸€ í´ë”ëª… ë””ì½”ë”© ì§€ì›

**UI:**
```
ğŸ“ í´ë”
â”œâ”€â”€ ğŸ“ entry
â”œâ”€â”€ ğŸ“ scratch
â”œâ”€â”€ ğŸ“ portfolio (ë¹„ì–´ìˆìŒ)
â””â”€â”€ ğŸ“ gallery
ì½”ë“œ:
javascriptrenderFolderTree(folders) {
  container.innerHTML = folders.map(folder => {
    const displayName = decodeURIComponent(folder.name);
    const emptyBadge = folder.isEmpty ? 
      ' <small class="text-muted">(ë¹„ì–´ìˆìŒ)</small>' : '';
    
    return `
      <div class="folder-item" 
           onclick="window.s3Explorer.loadFolder('${folder.fullPath}')">
        <span class="folder-icon">ğŸ“</span>
        <span class="folder-name">${displayName}${emptyBadge}</span>
      </div>
    `;
  }).join('');
}
4.1.2 íŒŒì¼ ëª©ë¡ (ìš°ì¸¡)
ê¸°ëŠ¥:

íŒŒì¼ëª…, í¬ê¸°, ìˆ˜ì •ì¼, ì•¡ì…˜ í‘œì‹œ
ì •ë ¬ ê¸°ëŠ¥ (ì´ë¦„/í¬ê¸°/ë‚ ì§œ)
í•œê¸€ íŒŒì¼ëª… ë””ì½”ë”© ì§€ì›
ENT/SB3 íŒŒì¼ í´ë¦­ ì‹œ ì—ë””í„° ìë™ ì—´ê¸°

í…Œì´ë¸” êµ¬ì¡°:
ì´ë¦„í¬ê¸°ìˆ˜ì •ì¼ì‚­ì œğŸ¨ 1-1 ì™„ì„±ì½”ë“œ.ent1.2 MBì˜¤ëŠ˜ 14:30ğŸ—‘ï¸ğŸ± ê²Œì„í”„ë¡œì íŠ¸.sb3850 KBì–´ì œ 10:15ğŸ—‘ï¸
ì •ë ¬ ê¸°ëŠ¥:
javascriptsortBy(field) {
  if (this.sortOptions.field === field) {
    // ê°™ì€ í•„ë“œ í´ë¦­ ì‹œ ì˜¤ë¦„ì°¨ìˆœ/ë‚´ë¦¼ì°¨ìˆœ í† ê¸€
    this.sortOptions.order = this.sortOptions.order === 'asc' ? 'desc' : 'asc';
  } else {
    // ë‹¤ë¥¸ í•„ë“œ ì„ íƒ ì‹œ ì˜¤ë¦„ì°¨ìˆœìœ¼ë¡œ ì´ˆê¸°í™”
    this.sortOptions.field = field;
    this.sortOptions.order = 'asc';
  }
  this.loadFolder(this.currentPath);
}
```

#### 4.1.3 Breadcrumb ë„¤ë¹„ê²Œì´ì…˜

**ê¸°ëŠ¥:**
- í˜„ì¬ ê²½ë¡œë¥¼ `/` êµ¬ë¶„ìë¡œ í‘œì‹œ
- í´ë¦­ ì‹œ í•´ë‹¹ ê²½ë¡œë¡œ ì´ë™
- Root ê²½ë¡œëŠ” ë¹„admin ì‚¬ìš©ìì—ê²Œ ìˆ¨ê¹€

**ì˜ˆì‹œ:**
```
Admin:    Root > users > student1 > entry > draft
Teacher:  users > student1 > entry > draft
Student:  entry > draft
ì½”ë“œ:
javascriptrenderBreadcrumbs(breadcrumbs) {
  let filteredBreadcrumbs = breadcrumbs;
  
  // ë¹„adminì€ Root ìˆ¨ê¹€
  if (!this.canAccessRoot) {
    filteredBreadcrumbs = breadcrumbs.filter((crumb, idx) => {
      if (idx === 0 && (!crumb.path || crumb.path === '')) {
        return false;
      }
      return true;
    });
  }
  
  return filteredBreadcrumbs.map((crumb, idx) => {
    const displayName = decodeURIComponent(crumb.name);
    
    if (idx === filteredBreadcrumbs.length - 1) {
      return `<span class="current">${displayName}</span>`;
    }
    return `<a href="#" onclick="window.s3Explorer.navigateTo('${crumb.path}')">${displayName}</a>`;
  }).join(' > ');
}
```

### 4.2 íŒŒì¼ ì—…ë¡œë“œ ê¸°ëŠ¥

#### 4.2.1 ë“œë˜ê·¸ ì•¤ ë“œë¡­

**ê¸°ëŠ¥:**
- ì „ì²´ í˜ì´ì§€ ë“œë˜ê·¸ ì•¤ ë“œë¡­ ì§€ì›
- ì˜¤ë²„ë ˆì´ UI í‘œì‹œ
- ìµœëŒ€ 10ê°œ íŒŒì¼, 100MB ì œí•œ

**ì‚¬ìš©ì íë¦„:**
```
1. íŒŒì¼ì„ S3 íƒìƒ‰ê¸° ì˜ì—­ìœ¼ë¡œ ë“œë˜ê·¸
   â†“
2. íŒŒë€ìƒ‰ ì˜¤ë²„ë ˆì´ í‘œì‹œ
   "ğŸ“¤ íŒŒì¼ì„ ë“œë¡­í•˜ì„¸ìš”"
   â†“
3. íŒŒì¼ ë“œë¡­
   â†“
4. ìë™ ì—…ë¡œë“œ ì‹œì‘
   â†“
5. ì™„ë£Œ í›„ ìƒˆë¡œê³ ì¹¨
ì½”ë“œ:
javascriptsetupDragAndDrop() {
  const mainContent = document.getElementById('mainContent');
  const overlay = document.getElementById('drag-drop-overlay');
  let dragCounter = 0;
  
  mainContent.addEventListener('dragenter', (e) => {
    e.preventDefault();
    dragCounter++;
    if (dragCounter === 1) {
      overlay.style.display = 'flex';
    }
  });
  
  mainContent.addEventListener('drop', (e) => {
    e.preventDefault();
    dragCounter = 0;
    overlay.style.display = 'none';
    
    const files = e.dataTransfer.files;
    this.uploadDroppedFiles(files);
  });
}
```

#### 4.2.2 ë²„íŠ¼ ì—…ë¡œë“œ

**ê¸°ëŠ¥:**
- "ğŸ“¤ ì—…ë¡œë“œ" ë²„íŠ¼ í´ë¦­
- ëª¨ë‹¬ íŒì—…ìœ¼ë¡œ íŒŒì¼ ì„ íƒ
- ë¯¸ë¦¬ë³´ê¸° ë° ê°œë³„ íŒŒì¼ ì œê±° ê°€ëŠ¥

**ëª¨ë‹¬ êµ¬ì¡°:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“¤ íŒŒì¼ ì—…ë¡œë“œ                  [X] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ğŸ“‚ íŒŒì¼ì„ ë“œë˜ê·¸í•˜ê±°ë‚˜ í´ë¦­   â”‚  â”‚
â”‚  â”‚    ìµœëŒ€ 100MB, 10ê°œ íŒŒì¼      â”‚  â”‚
â”‚  â”‚ ğŸ“Œ ì—…ë¡œë“œ ìœ„ì¹˜: users/student1â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                     â”‚
â”‚  ì„ íƒëœ íŒŒì¼:                       â”‚
â”‚  ğŸ¨ íŒŒì¼1.ent  1.2MB  [X]           â”‚
â”‚  ğŸ± íŒŒì¼2.sb3  850KB  [X]           â”‚
â”‚                                     â”‚
â”‚  [â”â”â”â”â”â”â”â”â”â”â”â”â”] 0%                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚               [ì·¨ì†Œ] [ì—…ë¡œë“œ]       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
API í˜¸ì¶œ:
javascriptasync startUpload() {
  const formData = new FormData();
  this.selectedUploadFiles.forEach(file => {
    formData.append('files', file);
  });
  formData.append('folder', this.currentPath);
  
  const response = await fetch('/api/s3/upload', {
    method: 'POST',
    body: formData
  });
  
  const data = await response.json();
  
  if (data.success) {
    this.showSuccess('ì—…ë¡œë“œ ì™„ë£Œ');
    this.refresh();
  }
}
```

### 4.3 íŒŒì¼ ì‚­ì œ ê¸°ëŠ¥

**ê¸°ëŠ¥:**
- ğŸ—‘ï¸ ì‚­ì œ ë²„íŠ¼ í´ë¦­
- í™•ì¸ ë‹¤ì´ì–¼ë¡œê·¸
- S3ì—ì„œ íŒŒì¼ ì˜êµ¬ ì‚­ì œ

**ì‚¬ìš©ì íë¦„:**
```
1. ğŸ—‘ï¸ ë²„íŠ¼ í´ë¦­
   â†“
2. "ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?" í™•ì¸
   â†“
3. [í™•ì¸] í´ë¦­
   â†“
4. DELETE /api/s3/delete?key=...
   â†“
5. S3ì—ì„œ íŒŒì¼ ì‚­ì œ
   â†“
6. "ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤." ë©”ì‹œì§€
   â†“
7. íŒŒì¼ ëª©ë¡ ìƒˆë¡œê³ ì¹¨
ì½”ë“œ:
javascriptasync deleteFile(key) {
  if (!confirm('ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) return;
  
  const response = await fetch(`/api/s3/delete?key=${encodeURIComponent(key)}`, {
    method: 'DELETE'
  });
  
  const data = await response.json();
  
  if (!data.success) {
    throw new Error(data.error);
  }
  
  this.showSuccess('ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.');
  this.refresh();
}
4.4 Entry/Scratch í†µí•©
4.4.1 íŒŒì¼ í´ë¦­ ì‹œ ìë™ ì—´ê¸°
ì§€ì› í™•ì¥ì:
í™•ì¥ìë™ì‘URL íŒŒë¼ë¯¸í„°.entEntry ì—ë””í„° ìƒˆ íƒ­s3Url, userID, role.sb2, .sb3Scratch ì—ë””í„° ìƒˆ íƒ­project_fileê¸°íƒ€í´ë¦­ ë¶ˆê°€-
Entry ì—´ê¸°:
javascriptasync openInEntry(key) {
  // S3 ì§ì ‘ URL ìƒì„±
  const s3Url = `https://educodingnplaycontents.s3.amazonaws.com/${key}`;
  
  // Entry ì—ë””í„° URL
  const userID = this.config.userID || 'guest';
  const userRole = this.config.userRole || 'student';
  const entryUrl = `/entry_editor/?s3Url=${encodeURIComponent(s3Url)}&userID=${userID}&role=${userRole}`;
  
  window.open(entryUrl, '_blank');
}
```

**ìƒì„± URL ì˜ˆì‹œ:**
```
https://app.codingnplay.co.kr/entry_editor/
  ?s3Url=https%3A%2F%2Feducodingnplaycontents.s3.amazonaws.com%2Fusers%2Fdoopyo%2Fentry%2Fdraft%2F1-1%20%EC%99%84%EC%84%B1%EC%BD%94%EB%93%9C.ent
  &userID=doopyo
  &role=admin
Scratch ì—´ê¸°:
javascriptasync openInScratch(key) {
  // S3 ì§ì ‘ URL ìƒì„±
  const s3Url = `https://educodingnplaycontents.s3.amazonaws.com/${key}`;
  
  // Scratch URL
  const scratchUrl = `/scratch/?project_file=${encodeURIComponent(s3Url)}`;
  
  window.open(scratchUrl, '_blank');
}
```

**ìƒì„± URL ì˜ˆì‹œ:**
```
https://app.codingnplay.co.kr/scratch/
  ?project_file=https%3A%2F%2Feducodingnplaycontents.s3.amazonaws.com%2Fsb3%2Fcps1-1a.sb2
```

---

## 5. UI/UX ì„¤ê³„

### 5.1 ë ˆì´ì•„ì›ƒ êµ¬ì¡°
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Global Header (Logo, Menu, Profile...)                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“‚ Root > users > student1 > entry > draft   [ğŸ”„ ìƒˆë¡œê³ ì¹¨] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸ“ í´ë”     â”‚  â”‚ íŒŒì¼ ëª©ë¡                     â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ ğŸ“ entry    â”‚  â”‚ ì´ë¦„ â–¼ | í¬ê¸° | ìˆ˜ì •ì¼ | ì‚­ì œ â”‚   â”‚
â”‚  â”‚ ğŸ“ scratch  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ ğŸ“ gallery  â”‚  â”‚ ğŸ¨ íŒŒì¼1.ent | 1MB | ì˜¤ëŠ˜ | ğŸ—‘ï¸  â”‚   â”‚
â”‚  â”‚             â”‚  â”‚ ğŸ± íŒŒì¼2.sb3 | 2MB | ì–´ì œ | ğŸ—‘ï¸  â”‚   â”‚
â”‚  â”‚             â”‚  â”‚                                 â”‚   â”‚
â”‚  â”‚             â”‚  â”‚                                 â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                          â”‚
â”‚  ğŸ“Œ 20ê°œ í•­ëª©                    [ğŸ“¤ ì—…ë¡œë“œ] [ğŸ—‘ï¸ ì‚­ì œ]   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
5.2 ìƒ‰ìƒ ë° ì•„ì´ì½˜
íŒŒì¼ ì•„ì´ì½˜ ë§¤í•‘:
javascriptconst icons = {
  'ent': 'ğŸ¨',      // Entry
  'sb3': 'ğŸ±',      // Scratch
  'sb2': 'ğŸ±',      // Scratch 2.0
  'png': 'ğŸ–¼ï¸',     // ì´ë¯¸ì§€
  'jpg': 'ğŸ–¼ï¸',
  'pdf': 'ğŸ“„',      // ë¬¸ì„œ
  'zip': 'ğŸ“¦',      // ì••ì¶•
  'mp4': 'ğŸ¬',      // ë¹„ë””ì˜¤
  'html': 'ğŸŒ',     // ì›¹
  'js': 'ğŸ“œ',       // ìŠ¤í¬ë¦½íŠ¸
  'json': 'ğŸ“‹'      // ë°ì´í„°
};
ìƒíƒœ ìƒ‰ìƒ:

ğŸŸ¢ ì„±ê³µ: #28a745
ğŸ”´ ì˜¤ë¥˜: #dc3545
ğŸŸ¡ ê²½ê³ : #ffc107
ğŸ”µ ì •ë³´: #007bff

5.3 ë°˜ì‘í˜• ë””ìì¸
ë¸Œë ˆì´í¬í¬ì¸íŠ¸:

Desktop: >= 1200px - 3ì—´ ë ˆì´ì•„ì›ƒ
Tablet: 768px ~ 1199px - 2ì—´ ë ˆì´ì•„ì›ƒ
Mobile: < 768px - 1ì—´ ë ˆì´ì•„ì›ƒ (í´ë” íŠ¸ë¦¬ ìˆ¨ê¹€)


6. API ëª…ì„¸
6.1 íŒŒì¼ íƒìƒ‰ API
GET /api/s3/browse
ì„¤ëª…: ì§€ì •ëœ ê²½ë¡œì˜ í´ë” ë° íŒŒì¼ ëª©ë¡ ì¡°íšŒ
íŒŒë¼ë¯¸í„°:
ì´ë¦„íƒ€ì…í•„ìˆ˜ì„¤ëª…prefixstringâœ…S3 ê²½ë¡œ (ì˜ˆ: users/student1/)platformstringâŒí”Œë«í¼ í•„í„° (entry, scratch ë“±)
ì‘ë‹µ (ì„±ê³µ):
json{
  "success": true,
  "breadcrumbs": [
    { "name": "Root", "path": "" },
    { "name": "users", "path": "users/" },
    { "name": "student1", "path": "users/student1/" }
  ],
  "folders": [
    {
      "name": "entry",
      "fullPath": "users/student1/entry/",
      "isEmpty": false
    },
    {
      "name": "scratch",
      "fullPath": "users/student1/scratch/",
      "isEmpty": true
    }
  ],
  "files": [
    {
      "key": "users/student1/entry/íŒŒì¼.ent",
      "name": "%ED%8C%8C%EC%9D%BC.ent",
      "size": 1234567,
      "sizeFormatted": "1.18 MB",
      "lastModified": "2025-01-03T10:30:00.000Z",
      "icon": "ğŸ¨"
    }
  ]
}
ì‘ë‹µ (ë¦¬ë‹¤ì´ë ‰íŠ¸):
json{
  "success": true,
  "redirect": true,
  "redirectPath": "users/student1/",
  "message": "ë³¸ì¸ í´ë”ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸í•©ë‹ˆë‹¤."
}
ì‘ë‹µ (ì˜¤ë¥˜):
json{
  "success": false,
  "error": "ì ‘ê·¼ ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤."
}
```

### 6.2 íŒŒì¼ ë‹¤ìš´ë¡œë“œ API

#### GET `/api/s3/download`

**ì„¤ëª…:** S3 íŒŒì¼ ë‹¤ìš´ë¡œë“œ (ë¸Œë¼ìš°ì € ìë™ ë‹¤ìš´ë¡œë“œ)

**íŒŒë¼ë¯¸í„°:**
| ì´ë¦„ | íƒ€ì… | í•„ìˆ˜ | ì„¤ëª… |
|------|------|------|------|
| `key` | string | âœ… | S3 ê°ì²´ í‚¤ (ì˜ˆ: `users/student1/file.ent`) |

**ì‘ë‹µ:** íŒŒì¼ ìŠ¤íŠ¸ë¦¼ (Content-Disposition: attachment)

**ì˜ˆì‹œ:**
```
GET /api/s3/download?key=users/student1/entry/draft/íŒŒì¼.ent

HTTP/1.1 200 OK
Content-Type: application/octet-stream
Content-Disposition: attachment; filename="íŒŒì¼.ent"
Content-Length: 1234567

[Binary Data]
6.3 íŒŒì¼ ì—…ë¡œë“œ API
POST /api/s3/upload
ì„¤ëª…: ë‹¤ì¤‘ íŒŒì¼ ì—…ë¡œë“œ
Content-Type: multipart/form-data
íŒŒë¼ë¯¸í„°:
ì´ë¦„íƒ€ì…í•„ìˆ˜ì„¤ëª…filesFile[]âœ…ì—…ë¡œë“œí•  íŒŒì¼ë“¤ (ìµœëŒ€ 10ê°œ)folderstringâœ…ëŒ€ìƒ í´ë” ê²½ë¡œ
ìš”ì²­ ì˜ˆì‹œ:
httpPOST /api/s3/upload
Content-Type: multipart/form-data; boundary=----WebKitFormBoundary

------WebKitFormBoundary
Content-Disposition: form-data; name="files"; filename="íŒŒì¼.ent"
Content-Type: application/octet-stream

[Binary Data]
------WebKitFormBoundary
Content-Disposition: form-data; name="folder"

users/student1/entry/draft/
------WebKitFormBoundary--
ì‘ë‹µ (ì„±ê³µ):
json{
  "success": true,
  "message": "2ê°œ íŒŒì¼ ì—…ë¡œë“œ ì™„ë£Œ",
  "uploadedFiles": [
    {
      "key": "users/student1/entry/draft/íŒŒì¼1.ent",
      "size": 1234567
    },
    {
      "key": "users/student1/entry/draft/íŒŒì¼2.ent",
      "size": 987654
    }
  ]
}
ì‘ë‹µ (ì˜¤ë¥˜):
json{
  "success": false,
  "error": "íŒŒì¼ í¬ê¸°ê°€ 100MBë¥¼ ì´ˆê³¼í•©ë‹ˆë‹¤."
}
6.4 íŒŒì¼ ì‚­ì œ API
DELETE /api/s3/delete
ì„¤ëª…: S3 íŒŒì¼ ì‚­ì œ (ì˜êµ¬ ì‚­ì œ)
íŒŒë¼ë¯¸í„°:
ì´ë¦„íƒ€ì…í•„ìˆ˜ì„¤ëª…keystringâœ…ì‚­ì œí•  S3 ê°ì²´ í‚¤
ìš”ì²­ ì˜ˆì‹œ:
httpDELETE /api/s3/delete?key=users/student1/entry/draft/íŒŒì¼.ent
**ì¬ì‹œë„Dê³„ì†ì‘ë‹µ (ì„±ê³µ):**
json{
  "success": true,
  "message": "íŒŒì¼ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.",
  "deletedKey": "users/student1/entry/draft/íŒŒì¼.ent"
}
ì‘ë‹µ (ì˜¤ë¥˜):
json{
  "success": false,
  "error": "ì‚­ì œ ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤."
}
6.5 ë¯¸ë¦¬ë³´ê¸° API
GET /api/s3/preview
ì„¤ëª…: ì´ë¯¸ì§€ íŒŒì¼ ë¯¸ë¦¬ë³´ê¸° (Base64 ë°ì´í„° URL ë°˜í™˜)
íŒŒë¼ë¯¸í„°:
ì´ë¦„íƒ€ì…í•„ìˆ˜ì„¤ëª…keystringâœ…S3 ê°ì²´ í‚¤
ì‘ë‹µ (ì„±ê³µ):
json{
  "success": true,
  "data": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUg...",
  "contentType": "image/png"
}
ì‘ë‹µ (ì˜¤ë¥˜):
json{
  "success": false,
  "error": "ë¯¸ë¦¬ë³´ê¸°ë¥¼ ì§€ì›í•˜ì§€ ì•ŠëŠ” íŒŒì¼ í˜•ì‹ì…ë‹ˆë‹¤."
}
```

---

## 7. íŒŒì¼ êµ¬ì¡°

### 7.1 í”„ë¡œì íŠ¸ ë””ë ‰í† ë¦¬ êµ¬ì¡°
```
educodingnplay/
â”œâ”€â”€ routes/
â”‚   â”œâ”€â”€ s3Router.js                    # ğŸ”¥ í†µí•© S3 ë¼ìš°í„°
â”‚   â”œâ”€â”€ apiRouter.js                   # S3 API ì—”ë“œí¬ì¸íŠ¸
â”‚   â”œâ”€â”€ adminRouter.js                 # Admin ëŒ€ì‹œë³´ë“œ
â”‚   â”œâ”€â”€ teacherRouter.js               # Teacher ëŒ€ì‹œë³´ë“œ
â”‚   â””â”€â”€ ...
â”‚
â”œâ”€â”€ views/
â”‚   â”œâ”€â”€ partials/
â”‚   â”‚   â””â”€â”€ header.ejs                 # ğŸ”¥ "ë‚´ íŒŒì¼" ì•„ì´ì½˜ í¬í•¨
â”‚   â”œâ”€â”€ common/
â”‚   â”‚   â””â”€â”€ s3-browser.ejs             # S3 íƒìƒ‰ê¸° í…œí”Œë¦¿
â”‚   â”œâ”€â”€ admin/
â”‚   â”‚   â””â”€â”€ dashboard.ejs              # Admin ëŒ€ì‹œë³´ë“œ
â”‚   â””â”€â”€ teacher/
â”‚       â””â”€â”€ student-files.ejs          # Teacher íŒŒì¼ ê´€ë¦¬
â”‚
â”œâ”€â”€ public/
â”‚   â”œâ”€â”€ js/
â”‚   â”‚   â””â”€â”€ components/
â”‚   â”‚       â””â”€â”€ S3Explorer.js          # ğŸ”¥ S3 íƒìƒ‰ê¸° í´ë¼ì´ì–¸íŠ¸
â”‚   â”œâ”€â”€ css/
â”‚   â”‚   â””â”€â”€ admin/
â”‚   â”‚       â””â”€â”€ s3-browser.css         # S3 íƒìƒ‰ê¸° ìŠ¤íƒ€ì¼
â”‚   â””â”€â”€ resource/
â”‚       â””â”€â”€ profiles/
â”‚           â””â”€â”€ default.webp           # ê¸°ë³¸ í”„ë¡œí•„ ì´ë¯¸ì§€
â”‚
â”œâ”€â”€ lib_login/
â”‚   â”œâ”€â”€ auth.js                        # ì¸ì¦ ëª¨ë“ˆ
â”‚   â”œâ”€â”€ permissions.js                 # ê¶Œí•œ ê´€ë¦¬
â”‚   â””â”€â”€ authMiddleware.js              # ì¸ì¦ ë¯¸ë“¤ì›¨ì–´
â”‚
â”œâ”€â”€ server.js                          # ğŸ”¥ ë©”ì¸ ì„œë²„ (ìºì¹˜ì˜¬ ë¼ìš°íŠ¸ ìˆ˜ì •)
â”œâ”€â”€ config.js                          # í™˜ê²½ ì„¤ì •
â””â”€â”€ .env                               # í™˜ê²½ ë³€ìˆ˜ (AWS í‚¤)
7.2 í•µì‹¬ íŒŒì¼ ìƒì„¸
7.2.1 routes/s3Router.js (í†µí•© ë¼ìš°í„°)
ì—­í• : ì—­í• ë³„ S3 ë¸Œë¼ìš°ì € ì ‘ê·¼ í†µí•© ê´€ë¦¬
ì£¼ìš” ê¸°ëŠ¥:

âœ… ì—­í•  ê²€ì¦ ë° ìë™ ì„¤ì •
âœ… scope, enableDelete ìë™ í• ë‹¹
âœ… 3ê°€ì§€ ì—”ë“œí¬ì¸íŠ¸ ì œê³µ

ì½”ë“œ êµ¬ì¡°:
javascriptconst express = require('express');
const router = express.Router();
const { authenticateUser } = require('../lib_login/authMiddleware');

/**
 * GET /s3/browser (ê³µí†µ)
 * ì—­í• ë³„ ìë™ ì„¤ì •
 */
router.get('/browser', authenticateUser, (req, res) => {
  const { userID, role, centerID } = req.session;
  
  let config = {
    userID, role, centerID,
    pageTitle: 'S3 íŒŒì¼ ê´€ë¦¬'
  };
  
  // ğŸ¯ ì—­í• ë³„ scope, enableDelete ì„¤ì •
  switch(role) {
    case 'admin':
      config.scope = 'all';
      config.enableDelete = true;
      break;
    case 'manager':
    case 'teacher':
      config.scope = 'center';
      config.enableDelete = true;
      break;
    case 'student':
      config.scope = 'self';
      config.enableDelete = true;
      break;
    default:
      return res.status(403).json({ error: 'ì ‘ê·¼ ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.' });
  }
  
  res.render('common/s3-browser', config);
});

/**
 * GET /s3/my-files (í•™ìƒ ì „ìš©)
 */
router.get('/my-files', authenticateUser, (req, res) => {
  if (req.session.role !== 'student') {
    return res.redirect('/s3/browser');
  }
  
  res.render('common/s3-browser', {
    userID: req.session.userID,
    role: req.session.role,
    centerID: req.session.centerID,
    pageTitle: 'ë‚´ íŒŒì¼ ê´€ë¦¬',
    scope: 'self',
    enableDelete: true
  });
});

/**
 * GET /s3/student-files (êµì‚¬ ì „ìš©)
 */
router.get('/student-files', authenticateUser, (req, res) => {
  const allowedRoles = ['admin', 'teacher', 'manager'];
  
  if (!allowedRoles.includes(req.session.role)) {
    return res.status(403).send('êµì‚¬ ê¶Œí•œì´ í•„ìš”í•©ë‹ˆë‹¤.');
  }
  
  res.render('common/s3-browser', {
    userID: req.session.userID,
    role: req.session.role,
    centerID: req.session.centerID,
    pageTitle: 'í•™ìƒ íŒŒì¼ ê´€ë¦¬',
    scope: req.session.role === 'admin' ? 'all' : 'center',
    enableDelete: true
  });
});

module.exports = router;
7.2.2 views/partials/header.ejs (í—¤ë” ì»´í¬ë„ŒíŠ¸)
ì—­í• : ì „ì—­ ë„¤ë¹„ê²Œì´ì…˜ ë° "ë‚´ íŒŒì¼" ì•„ì´ì½˜ ì œê³µ
ì£¼ìš” ê¸°ëŠ¥:

âœ… ì—­í• ë³„ ë©”ë‰´ í‘œì‹œ
âœ… "ë‚´ íŒŒì¼" ì•„ì´ì½˜ í´ë¦­ â†’ ëª¨ë‹¬ ì—´ê¸°
âœ… ì—­í• ë³„ ìë™ ê²½ë¡œ ë¶„ê¸°

í•µì‹¬ ì½”ë“œ:
<!-- ë‚´ íŒŒì¼ ì•„ì´ì½˜ (ì „ì²´ ì‚¬ìš©ì) -->
<div class="board-notification-wrapper">
    <a href="/s3/my-files" class="board-icon-btn" title="ë‚´ íŒŒì¼ ê´€ë¦¬">
        <i class="bi bi-folder-fill"></i>
    </a>
    <div class="board-tooltip">ë‚´ íŒŒì¼</div>
</div>

<!-- ê¸°ì¡´ ëª¨ë‹¬ ê´€ë ¨ ì½”ë“œ ì œê±°ë¨ -->
<div class="modal fade" id="myFilesModal" tabindex="-1">
    <div class="modal-dialog modal-fullscreen">
        <div class="modal-content">
            <div class="modal-body p-0">
                <iframe id="myFilesFrame" 
                        src="" 
                        style="width: 100%; height: 100%; border: none;">
                </iframe>
            </div>
        </div>
    </div>
</div>

<script>
/**
 * ğŸ”¥ ë‚´ íŒŒì¼ ëª¨ë‹¬ ì—´ê¸° (ì—­í• ë³„ ìë™ ê²½ë¡œ ì„ íƒ)
 */
function openMyFiles() {
    const userRole = '<%= role %>';
    const modal = new bootstrap.Modal(document.getElementById('myFilesModal'));
    const iframe = document.getElementById('myFilesFrame');
    
    // ì—­í• ë³„ ê²½ë¡œ ìë™ ì„ íƒ
    let s3Path;
    
    if (userRole === 'admin') {
        s3Path = '/s3/browser';  // Adminì€ ì „ì²´ íƒìƒ‰
    } else if (userRole === 'teacher' || userRole === 'manager') {
        s3Path = '/s3/student-files';  // TeacherëŠ” í•™ìƒ íŒŒì¼
    } else if (userRole === 'student') {
        s3Path = '/s3/my-files';  // StudentëŠ” ë³¸ì¸ íŒŒì¼ë§Œ
    } else {
        s3Path = '/s3/browser';  // ê¸°ë³¸ê°’
    }
    
    console.log('ğŸ“‚ S3 ê²½ë¡œ:', s3Path, '(ì—­í• :', userRole, ')');
    iframe.src = s3Path;
    
    modal.show();
}

// ëª¨ë‹¬ ë‹«ì„ ë•Œ iframe ì´ˆê¸°í™”
document.getElementById('myFilesModal').addEventListener('hidden.bs.modal', function () {
    document.getElementById('myFilesFrame').src = '';
});
</script>
7.2.3 public/js/components/S3Explorer.js (í´ë¼ì´ì–¸íŠ¸)
ì—­í• : S3 íŒŒì¼ íƒìƒ‰ UI ë Œë”ë§ ë° API í˜¸ì¶œ
í´ë˜ìŠ¤ êµ¬ì¡°:
javascriptclass S3Explorer {
  constructor(config) {
    this.config = {
      containerId,       // ë Œë”ë§í•  ì»¨í…Œì´ë„ˆ ID
      apiEndpoint,       // API ì—”ë“œí¬ì¸íŠ¸
      scope,             // ì ‘ê·¼ ë²”ìœ„ (all/center/self)
      rootPath,          // ì´ˆê¸° ê²½ë¡œ
      enableUpload,      // ì—…ë¡œë“œ ê°€ëŠ¥ ì—¬ë¶€
      enableDelete,      // ì‚­ì œ ê°€ëŠ¥ ì—¬ë¶€
      userID,            // ì‚¬ìš©ì ID
      userRole           // ì‚¬ìš©ì ì—­í• 
    };
    
    this.currentPath = '';           // í˜„ì¬ ê²½ë¡œ
    this.allowedBasePath = '';       // í—ˆìš©ëœ ê¸°ë³¸ ê²½ë¡œ
    this.canAccessRoot = false;      // Root ì ‘ê·¼ ê°€ëŠ¥ ì—¬ë¶€
    this.sortOptions = { field: 'name', order: 'asc' };
    
    this.init();
  }
  
  // ğŸ”¥ í•µì‹¬ ë©”ì„œë“œ
  async init() { ... }                     // ì´ˆê¸°í™”
  setInitialPath() { ... }                 // ì—­í• ë³„ ì´ˆê¸° ê²½ë¡œ ì„¤ì •
  renderLayout() { ... }                   // UI ë ˆì´ì•„ì›ƒ ë Œë”ë§
  async loadFolder(path) { ... }          // í´ë” ë¡œë“œ
  renderBreadcrumbs(breadcrumbs) { ... }   // Breadcrumb ë Œë”ë§
  renderFolderTree(folders) { ... }        // í´ë” íŠ¸ë¦¬ ë Œë”ë§
  renderFileList(files) { ... }            // íŒŒì¼ ëª©ë¡ ë Œë”ë§
  sortFiles(files) { ... }                 // íŒŒì¼ ì •ë ¬
  isPathAllowed(path) { ... }              // ê²½ë¡œ ì ‘ê·¼ ê¶Œí•œ í™•ì¸
  
  // íŒŒì¼ ì‘ì—…
  async download(key) { ... }              // ë‹¤ìš´ë¡œë“œ
  async deleteFile(key) { ... }            // ì‚­ì œ
  async openInEntry(key) { ... }           // Entryì—ì„œ ì—´ê¸°
  async openInScratch(key) { ... }         // Scratchì—ì„œ ì—´ê¸°
  
  // ì—…ë¡œë“œ
  setupDragAndDrop() { ... }               // ë“œë˜ê·¸ ì•¤ ë“œë¡­ ì„¤ì •
  showUploadModal() { ... }                // ì—…ë¡œë“œ ëª¨ë‹¬
  async uploadDroppedFiles(files) { ... }  // ë“œë¡­ëœ íŒŒì¼ ì—…ë¡œë“œ
  async startUpload() { ... }              // ì—…ë¡œë“œ ì‹œì‘
  
  // ìœ í‹¸ë¦¬í‹°
  formatDate(dateString) { ... }           // ë‚ ì§œ í¬ë§·íŒ…
  formatFileSize(bytes) { ... }            // íŒŒì¼ í¬ê¸° í¬ë§·íŒ…
  getFileIcon(fileName) { ... }            // íŒŒì¼ ì•„ì´ì½˜ ë°˜í™˜
  showLoading(show) { ... }                // ë¡œë”© í‘œì‹œ
  showError(message) { ... }               // ì—ëŸ¬ ë©”ì‹œì§€
  showSuccess(message) { ... }             // ì„±ê³µ ë©”ì‹œì§€
}

// ì „ì—­ ì¸ìŠ¤í„´ìŠ¤
window.S3Explorer = S3Explorer;
ì´ˆê¸°í™” ì˜ˆì‹œ:
javascript// views/common/s3-browser.ejs
window.s3Explorer = new S3Explorer({
  containerId: 's3-browser',
  apiEndpoint: '/api/s3/browse',
  scope: '<%= scope %>',
  rootPath: '',
  userID: '<%= userID %>',
  userRole: '<%= role %>',
  enableUpload: <%= enableDelete %>,  // ì—…ë¡œë“œ/ì‚­ì œ ê¶Œí•œ ë™ì¼
  enableDelete: <%= enableDelete %>,
  enablePreview: true
});
7.2.4 server.js (ë©”ì¸ ì„œë²„ - ìºì¹˜ì˜¬ ë¼ìš°íŠ¸ ìˆ˜ì •)
ë¬¸ì œ: ê¸°ì¡´ ìºì¹˜ì˜¬ ë¼ìš°íŠ¸ê°€ /s3/* ê²½ë¡œë¥¼ ê°€ë¡œì±„ì„œ index.ejs ë Œë”ë§
í•´ê²°: S3 ê²½ë¡œ ì˜ˆì™¸ ì²˜ë¦¬ ì¶”ê°€
ìˆ˜ì • ì½”ë“œ:
javascript// ìºì¹˜ì˜¬ ë¼ìš°íŠ¸ (ê°€ì¥ ë§ˆì§€ë§‰)
app.get('*', (req, res, next) => {
  const reqPath = req.path.toLowerCase();
  
  const staticExtensions = ['.js', '.css', '.png', ...];
  const staticPaths = ['/js/', '/css/', '/resource/', ...];
  
  const isStaticFile = staticExtensions.some(ext => reqPath.endsWith(ext));
  const isStaticPath = staticPaths.some(path => reqPath.startsWith(path));
  const isApiRequest = reqPath.startsWith('/api/');
  
  // ğŸ”¥ S3 ë¼ìš°í„° ì˜ˆì™¸ ì²˜ë¦¬
  const isS3Route = reqPath.startsWith('/s3/');
  
  if (isStaticFile || isStaticPath) {
    return res.status(404).send('File not found');
  }
  
  if (isApiRequest) {
    return res.status(404).json({ error: 'API endpoint not found' });
  }
  
  // ğŸ”¥ S3 ê²½ë¡œëŠ” 404 ë°˜í™˜ (ë¼ìš°í„°ì—ì„œ ì²˜ë¦¬)
  if (isS3Route) {
    console.log('âŒ S3 ë¼ìš°íŠ¸ ì²˜ë¦¬ ì‹¤íŒ¨:', reqPath);
    return res.status(404).json({ error: 'S3 route not found' });
  }
  
  // ì¸ì¦ í™•ì¸
  if (!req.session || !req.session.is_logined) {
    return res.redirect('/auth/login');
  }
  
  // ì¼ë°˜ í˜ì´ì§€ëŠ” index.ejsë¡œ
  res.render('index', { ... });
});
```

### 7.3 AWS S3 í´ë” êµ¬ì¡°
```
educodingnplaycontents/
â”œâ”€â”€ users/                              # ì‚¬ìš©ìë³„ ê²©ë¦¬ í´ë”
â”‚   â”œâ”€â”€ student1/
â”‚   â”‚   â”œâ”€â”€ entry/
â”‚   â”‚   â”‚   â”œâ”€â”€ draft/                 # ì„ì‹œ ì €ì¥
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ 1-1 ì™„ì„±ì½”ë“œ.ent
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ í”„ë¡œì íŠ¸1.ent
â”‚   â”‚   â”‚   â””â”€â”€ final/                 # ìµœì¢… ì œì¶œ
â”‚   â”‚   â”‚       â””â”€â”€ ìµœì¢…ì‘í’ˆ.ent
â”‚   â”‚   â”œâ”€â”€ scratch/
â”‚   â”‚   â”‚   â”œâ”€â”€ draft/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ê²Œì„1.sb3
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ì• ë‹ˆë©”ì´ì…˜.sb3
â”‚   â”‚   â”‚   â””â”€â”€ final/
â”‚   â”‚   â”‚       â””â”€â”€ ê²Œì„ì™„ì„±.sb3
â”‚   â”‚   â”œâ”€â”€ portfolio/                 # í¬íŠ¸í´ë¦¬ì˜¤
â”‚   â”‚   â”‚   â””â”€â”€ ì‘í’ˆëª¨ìŒ.zip
â”‚   â”‚   â””â”€â”€ gallery/                   # ê°¤ëŸ¬ë¦¬
â”‚   â”‚       â”œâ”€â”€ ì´ë¯¸ì§€1.png
â”‚   â”‚       â””â”€â”€ ì´ë¯¸ì§€2.jpg
â”‚   â”‚
â”‚   â”œâ”€â”€ student2/
â”‚   â”‚   â””â”€â”€ ... (ë™ì¼ êµ¬ì¡°)
â”‚   â”‚
â”‚   â””â”€â”€ teacher1/                      # êµì‚¬ë„ ë™ì¼ êµ¬ì¡°
â”‚       â””â”€â”€ ...
â”‚
â”œâ”€â”€ sb3/                                # ê³µìœ  ìŠ¤í¬ë˜ì¹˜ í…œí”Œë¦¿
â”‚   â”œâ”€â”€ cps1-1a.sb2
â”‚   â”œâ”€â”€ cps1-1e1.sb3
â”‚   â””â”€â”€ ...
â”‚
â”œâ”€â”€ ent/                                # ê³µìœ  ì—”íŠ¸ë¦¬ í…œí”Œë¦¿
â”‚   â”œâ”€â”€ cpe1-1a.ent
â”‚   â”œâ”€â”€ cpe1-2a.ent
â”‚   â””â”€â”€ ...
â”‚
â”œâ”€â”€ resource/                           # ê³µí†µ ë¦¬ì†ŒìŠ¤
â”‚   â”œâ”€â”€ images/
â”‚   â”œâ”€â”€ sounds/
â”‚   â””â”€â”€ backgrounds/
â”‚
â””â”€â”€ uploads/                            # ê¸°íƒ€ ì—…ë¡œë“œ íŒŒì¼
    â””â”€â”€ ...

8. ë°ì´í„°ë² ì´ìŠ¤
8.1 Users í…Œì´ë¸”
ì„¤ëª…: ì‚¬ìš©ì ì •ë³´ ë° ê¶Œí•œ ê´€ë¦¬
êµ¬ì¡°:
sqlCREATE TABLE Users (
    id INT AUTO_INCREMENT PRIMARY KEY,
    userID VARCHAR(255) UNIQUE,
    password VARCHAR(255) NOT NULL,
    email VARCHAR(255) NOT NULL,
    name VARCHAR(255),
    phone VARCHAR(20),
    birthdate DATE,
    role ENUM('admin', 'kinder', 'school', 'manager', 'teacher', 'student', 'guest') NOT NULL,
    centerID INT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    profile_image VARCHAR(255) DEFAULT '/resource/profiles/default.webp',
    last_board_visit TIMESTAMP,
    
    INDEX idx_role (role),
    INDEX idx_centerID (centerID),
    FOREIGN KEY (centerID) REFERENCES Centers(id) ON DELETE SET NULL
);
ì—­í• ë³„ ì‚¬ìš©ì ìˆ˜ (ì˜ˆì‹œ):
ì—­í• ì‚¬ìš©ì ìˆ˜admin5manager20teacher150student3,500Total3,675
8.2 LearningLogs í…Œì´ë¸”
ì„¤ëª…: í•™ìŠµ í™œë™ ë¡œê·¸ (í–¥í›„ S3 íŒŒì¼ í™œë™ ì¶”ì  ê°€ëŠ¥)
êµ¬ì¡°:
sqlCREATE TABLE LearningLogs (
    learning_id INT AUTO_INCREMENT PRIMARY KEY,
    user_id INT NOT NULL,
    content_type VARCHAR(50),              -- 'entry', 'scratch', 's3_file' ë“±
    content_name VARCHAR(255),
    start_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    end_time TIMESTAMP,
    duration INT,                          -- ì´ˆ ë‹¨ìœ„
    progress INT,                          -- ì§„ë„ìœ¨ (%)
    center_id INT,
    
    FOREIGN KEY (user_id) REFERENCES Users(id) ON DELETE CASCADE,
    INDEX idx_user_content (user_id, content_type),
    INDEX idx_center (center_id)
);
S3 íŒŒì¼ í™œë™ ì¶”ì  ì˜ˆì‹œ (í–¥í›„ êµ¬í˜„):
sqlINSERT INTO LearningLogs (user_id, content_type, content_name, center_id)
VALUES (123, 's3_upload', 'users/student1/entry/draft/í”„ë¡œì íŠ¸.ent', 11);

INSERT INTO LearningLogs (user_id, content_type, content_name, center_id)
VALUES (123, 's3_open_entry', 'users/student1/entry/draft/í”„ë¡œì íŠ¸.ent', 11);
8.3 UserActivityLogs í…Œì´ë¸”
ì„¤ëª…: ì‚¬ìš©ì í™œë™ ë¡œê·¸ (S3 ì ‘ê·¼ ê¸°ë¡ í¬í•¨)
êµ¬ì¡°:
sqlCREATE TABLE UserActivityLogs (
    log_id INT AUTO_INCREMENT PRIMARY KEY,
    user_id INT NOT NULL,
    center_id INT,
    action_type VARCHAR(50) NOT NULL,      -- 'GET', 'POST', 'DELETE'
    action_detail TEXT,                    -- 'S3 íŒŒì¼ ì—…ë¡œë“œ', 'S3 íŒŒì¼ ì‚­ì œ' ë“±
    url VARCHAR(255),                      -- '/s3/browser', '/api/s3/upload' ë“±
    ip_address VARCHAR(45),
    user_agent VARCHAR(255),
    status VARCHAR(20),                    -- 'success', 'error'
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    
    FOREIGN KEY (user_id) REFERENCES Users(id) ON DELETE CASCADE,
    INDEX idx_user_action (user_id, action_type),
    INDEX idx_created (created_at)
);
S3 í™œë™ ë¡œê·¸ ì˜ˆì‹œ:
sql-- S3 ë¸Œë¼ìš°ì € ì ‘ê·¼
INSERT INTO UserActivityLogs (user_id, center_id, action_type, url, status)
VALUES (123, 11, 'GET', '/s3/my-files', 'success');

-- íŒŒì¼ ì—…ë¡œë“œ
INSERT INTO UserActivityLogs (user_id, center_id, action_type, action_detail, url, status)
VALUES (123, 11, 'POST', 'S3 íŒŒì¼ ì—…ë¡œë“œ: 2ê°œ', '/api/s3/upload', 'success');

-- íŒŒì¼ ì‚­ì œ
INSERT INTO UserActivityLogs (user_id, center_id, action_type, action_detail, url, status)
VALUES (123, 11, 'DELETE', 'S3 íŒŒì¼ ì‚­ì œ: file.ent', '/api/s3/delete', 'success');
8.4 ì„¼í„°ë³„ í†µê³„ ì¿¼ë¦¬ ì˜ˆì‹œ
sql-- ì„¼í„°ë³„ S3 ì‚¬ìš©ëŸ‰ í†µê³„
SELECT 
    u.centerID,
    COUNT(DISTINCT u.id) AS total_users,
    COUNT(DISTINCT CASE WHEN ual.url LIKE '/s3/%' THEN ual.user_id END) AS s3_active_users,
    COUNT(CASE WHEN ual.action_type = 'POST' AND ual.url = '/api/s3/upload' THEN 1 END) AS total_uploads,
    COUNT(CASE WHEN ual.action_type = 'DELETE' AND ual.url = '/api/s3/delete' THEN 1 END) AS total_deletes
FROM Users u
LEFT JOIN UserActivityLogs ual ON ual.user_id = u.id
WHERE u.role = 'student'
GROUP BY u.centerID;

9. ë³´ì•ˆ
9.1 ì¸ì¦ ë° ê¶Œí•œ
9.1.1 ì„¸ì…˜ ê¸°ë°˜ ì¸ì¦
ì„¤ì •:
javascript// server.js
app.use(session({
  store: new RedisStore({ client: redisClient }),
  secret: process.env.SESSION_SECRET,
  resave: false,
  saveUninitialized: false,
  cookie: {
    secure: false,           // HTTPS í™˜ê²½ì—ì„œëŠ” true
    httpOnly: true,
    sameSite: 'lax',
    domain: '.codingnplay.co.kr',
    maxAge: 3600000          // 1ì‹œê°„
  }
}));
ì¸ì¦ ë¯¸ë“¤ì›¨ì–´:
javascriptconst authenticateUser = (req, res, next) => {
  const token = req.cookies.token;
  
  if (token) {
    jwt.verify(token, process.env.JWT_SECRET, (err, user) => {
      if (err) {
        return res.status(401).json({ error: 'ìœ íš¨í•˜ì§€ ì•Šì€ í† í°' });
      }
      req.user = user;
      next();
    });
  } else if (req.session && req.session.is_logined) {
    next();
  } else {
    res.status(401).json({ error: 'ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.' });
  }
};
9.1.2 ê²½ë¡œ ì ‘ê·¼ ì œì–´
ì„œë²„ì‚¬ì´ë“œ ê²€ì¦:
javascript// s3Router.js
router.get('/browser', authenticateUser, (req, res) => {
  // ì—­í•  ê²€ì¦
  if (!req.session.role) {
    return res.status(403).json({ error: 'ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.' });
  }
  
  // guestëŠ” ì ‘ê·¼ ì°¨ë‹¨
  if (req.session.role === 'guest') {
    return res.status(403).json({ error: 'ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.' });
  }
  
  // ì—­í• ë³„ ì„¤ì •
  // ...
});
í´ë¼ì´ì–¸íŠ¸ì‚¬ì´ë“œ ê²€ì¦:
javascript// S3Explorer.js
isPathAllowed(path) {
  // Adminì€ ëª¨ë“  ê²½ë¡œ í—ˆìš©
  if (this.config.userRole === 'admin') {
    return true;
  }
  
  // Root ì°¨ë‹¨
  if (!path || path === '') {
    return false;
  }
  
  // StudentëŠ” ë³¸ì¸ í´ë”ë§Œ
  if (this.config.userRole === 'student') {
    const allowedPath = `users/${this.config.userID}/`;
    return path.startsWith(allowedPath);
  }
  
  // Teacher/ManagerëŠ” users/ í•˜ìœ„ë§Œ
  if (['teacher', 'manager'].includes(this.config.userRole)) {
    return path.startsWith('users/');
  }
  
  return false;
}
9.2 AWS S3 ë³´ì•ˆ
9.2.1 IAM ê¶Œí•œ ì„¤ì •
í•„ìš” ê¶Œí•œ:
json{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Effect": "Allow",
      "Action": [
        "s3:ListBucket",
        "s3:GetBucketLocation"
      ],
      "Resource": "arn:aws:s3:::educodingnplaycontents"
    },
    {
      "Effect": "Allow",
      "Action": [
        "s3:PutObject",
        "s3:GetObject",
        "s3:DeleteObject"
      ],
      "Resource": "arn:aws:s3:::educodingnplaycontents/*"
    }
  ]
}
9.2.2 S3 ë²„í‚· ì •ì±…
CORS ì„¤ì •:
json[
  {
    "AllowedHeaders": ["*"],
    "AllowedMethods": ["GET", "HEAD", "PUT", "POST", "DELETE"],
    "AllowedOrigins": [
      "https://app.codingnplay.co.kr",
      "https://cosmoedu.co.kr"
    ],
    "ExposeHeaders": ["ETag"],
    "MaxAgeSeconds": 3000
  }
]
```

**ë²„í‚· ì•”í˜¸í™”:**
```
ê¸°ë³¸ ì•”í˜¸í™”: AES-256 (SSE-S3)
9.3 íŒŒì¼ ì—…ë¡œë“œ ë³´ì•ˆ
9.3.1 íŒŒì¼ í¬ê¸° ì œí•œ
javascript// S3Explorer.js
async uploadDroppedFiles(files) {
  const fileArray = Array.from(files);
  
  // íŒŒì¼ ê°œìˆ˜ ê²€ì¦
  if (fileArray.length > 10) {
    this.showError('í•œ ë²ˆì— ìµœëŒ€ 10ê°œ íŒŒì¼ê¹Œì§€ ì—…ë¡œë“œ ê°€ëŠ¥');
    return;
  }
  
  // íŒŒì¼ í¬ê¸° ê²€ì¦
  const maxSize = 100 * 1024 * 1024; // 100MB
  const oversized = fileArray.filter(f => f.size > maxSize);
  if (oversized.length > 0) {
    this.showError(`íŒŒì¼ í¬ê¸° ì´ˆê³¼: ${oversized.map(f => f.name).join(', ')}`);
    return;
  }
  
  // ...
}
9.3.2 íŒŒì¼ íƒ€ì… ê²€ì¦
javascript// ì„œë²„ì‚¬ì´ë“œ ê²€ì¦
const allowedExtensions = [
  '.ent', '.sb2', '.sb3',        // í”„ë¡œì íŠ¸ íŒŒì¼
  '.png', '.jpg', '.jpeg', '.gif', '.webp',  // ì´ë¯¸ì§€
  '.pdf', '.zip',                // ë¬¸ì„œ/ì••ì¶•
  '.html', '.js', '.json'        // ì›¹ íŒŒì¼
];

const ext = path.extname(file.originalname).toLowerCase();
if (!allowedExtensions.includes(ext)) {
  throw new Error('ì§€ì›í•˜ì§€ ì•ŠëŠ” íŒŒì¼ í˜•ì‹ì…ë‹ˆë‹¤.');
}
9.3.3 íŒŒì¼ëª… ì•ˆì „í™”
javascript// íŠ¹ìˆ˜ë¬¸ì ì œê±° ë° UTF-8 ì¸ì½”ë”©
function sanitizeFileName(fileName) {
  return fileName
    .replace(/[^\w\sê°€-í£.-]/g, '')  // íŠ¹ìˆ˜ë¬¸ì ì œê±°
    .replace(/\s+/g, '_')            // ê³µë°± â†’ ì–¸ë”ìŠ¤ì½”ì–´
    .substring(0, 100);              // ìµœëŒ€ 100ì
}
9.4 XSS ë° CSRF ë°©ì–´
9.4.1 XSS ë°©ì–´
íŒŒì¼ëª… HTML ì´ìŠ¤ì¼€ì´í”„:
javascriptfunction escapeHtml(text) {
  const map = {
    '&': '&amp;',
    '<': '&lt;',
    '>': '&gt;',
    '"': '&quot;',
    "'": '&#039;'
  };
  return text.replace(/[&<>"']/g, m => map[m]);
}

// ì‚¬ìš©
const safeFileName = escapeHtml(decodeURIComponent(file.name));
CSP í—¤ë”:
javascriptres.setHeader("Content-Security-Policy", 
  "default-src 'self'; " +
  "script-src 'self' 'unsafe-inline' https://cdn.jsdelivr.net; " +
  "img-src 'self' https://educodingnplaycontents.s3.amazonaws.com data:; " +
  "connect-src 'self' https://educodingnplaycontents.s3.amazonaws.com"
);
9.4.2 CSRF ë°©ì–´