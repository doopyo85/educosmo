<!-- í•™ìƒ ê´€ë¦¬ í˜ì´ì§€ -->
<div class="student-management-page">
    <div class="page-header">
        <h3>í•™ìƒ ê´€ë¦¬</h3>
        <p class="text-muted">ìš°ë¦¬ ì„¼í„° í•™ìƒë“¤ì˜ ëª©ë¡ê³¼ í•™ìŠµ ì§„ë„ë¥¼ ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
    </div>

    <!-- íƒ­ ë„¤ë¹„ê²Œì´ì…˜ -->
    <ul class="nav nav-tabs mb-4" id="studentTabs" role="tablist">
        <li class="nav-item" role="presentation">
            <button class="nav-link active" id="progress-tab" data-bs-toggle="tab" data-bs-target="#student-progress" type="button" role="tab">
                <i class="bi bi-graph-up-arrow me-2"></i>í•™ìŠµ ì§„ë„
            </button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="list-tab" data-bs-toggle="tab" data-bs-target="#student-list" type="button" role="tab">
                <i class="bi bi-people-fill me-2"></i>í•™ìƒ ëª©ë¡
            </button>
        </li>
    </ul>

    <!-- íƒ­ ì½˜í…ì¸  -->
    <div class="tab-content" id="studentTabContent">
        <!-- í•™ìŠµ ì§„ë„ íƒ­ -->
        <div class="tab-pane fade show active" id="student-progress" role="tabpanel">
            <!-- ê²€ìƒ‰ì°½ -->
            <div class="mb-3">
                <input type="text" id="progressSearch" class="form-control" placeholder="í•™ìƒ ì´ë¦„ ë˜ëŠ” ì•„ì´ë”” ê²€ìƒ‰..." />
            </div>

            <!-- ì§„ë„í‘œ í…Œì´ë¸” ìŠ¤íƒ€ì¼ -->
            <style>
                #student-progress table th,
                #student-progress table td {
                    text-align: center;
                    vertical-align: middle;
                }
            </style>

            <!-- ì§„ë„í‘œ í…Œì´ë¸” -->
            <table class="table table-bordered table-hover">
                <thead class="table-light">
                    <tr>
                        <th>í”„ë¡œí•„</th>
                        <th>CT</th>
                        <th>ì´ë¦„</th>
                        <th>ì•„ì´ë””</th>
                        <th>í˜„ì¬ í”Œë«í¼</th>
                        <th>ì§„ë„ìœ¨</th>
                        <th>ì™„ë£Œ ìˆ˜ / ì „ì²´</th>
                        <th>ìŠ¤í† ë¦¬ì§€</th>
                        <th>ìµœê·¼ í•™ìŠµì¼</th>
                    </tr>
                </thead>
                <tbody id="progressTableBody">
                    <!-- ë™ì ìœ¼ë¡œ ë¡œë“œ -->
                </tbody>
            </table>
        </div>

        <!-- í•™ìƒ ëª©ë¡ íƒ­ -->
        <div class="tab-pane fade" id="student-list" role="tabpanel">
            <!-- ìƒë‹¨ ì•¡ì…˜ ë°” -->
            <div class="action-bar">
                <div class="search-box">
                    <i class="bi bi-search"></i>
                    <input type="text" id="studentSearch" placeholder="í•™ìƒ ì´ë¦„ ë˜ëŠ” ì•„ì´ë”” ê²€ìƒ‰...">
                </div>
                <button class="btn btn-primary" id="addStudentBtn">
                    <i class="bi bi-person-plus"></i> í•™ìƒ ì¶”ê°€
                </button>
            </div>
            
            <!-- í•™ìƒ ëª©ë¡ í…Œì´ë¸” -->
            <div class="student-list-container">
                <table class="table table-hover" id="studentTable">
                    <thead>
                        <tr>
                            <th width="60px"></th>
                            <th>ì´ë¦„</th>
                            <th>ì•„ì´ë””</th>
                            <th>ì´ë©”ì¼</th>
                            <th>ê°€ì…ì¼</th>
                            <th>ìµœê·¼ ì ‘ì†</th>
                            <th width="100px">ê´€ë¦¬</th>
                        </tr>
                    </thead>
                    <tbody id="studentTableBody">
                        <!-- ë™ì  ìƒì„± -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<!-- í•™ìƒ ì¶”ê°€/ìˆ˜ì • ëª¨ë‹¬ -->
<div class="modal fade" id="studentModal" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="modalTitle">í•™ìƒ ì¶”ê°€</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <form id="studentForm">
                    <input type="hidden" id="studentId">
                    
                    <div class="mb-3">
                        <label class="form-label">ì•„ì´ë”” <span class="text-danger">*</span></label>
                        <input type="text" class="form-control" id="userID" required>
                    </div>
                    
                    <div class="mb-3">
                        <label class="form-label">ì´ë¦„ <span class="text-danger">*</span></label>
                        <input type="text" class="form-control" id="name" required>
                    </div>
                    
                    <div class="mb-3">
                        <label class="form-label">ì´ë©”ì¼</label>
                        <input type="email" class="form-control" id="email">
                    </div>
                    
                    <div class="mb-3">
                        <label class="form-label">ë¹„ë°€ë²ˆí˜¸ <small class="text-muted">(ìˆ˜ì • ì‹œ ê³µë€ì´ë©´ ë³€ê²½ ì•ˆ í•¨)</small></label>
                        <input type="password" class="form-control" id="password">
                    </div>
                    
                    <div class="mb-3">
                        <label class="form-label">ì „í™”ë²ˆí˜¸</label>
                        <input type="tel" class="form-control" id="phone">
                    </div>
                    
                    <div class="mb-3">
                        <label class="form-label">ìƒë…„ì›”ì¼</label>
                        <input type="date" class="form-control" id="birthdate">
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">ì·¨ì†Œ</button>
                <button type="button" class="btn btn-primary" id="saveStudentBtn">ì €ì¥</button>
            </div>
        </div>
    </div>
</div>

<!-- ğŸ”¥ S3 íŒŒì¼ ë¸Œë¼ìš°ì € ëª¨ë‹¬ -->
<div class="modal fade" id="s3BrowserModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-fullscreen">
        <div class="modal-content">
            <div class="modal-body p-0">
                <iframe id="s3BrowserFrame" 
                        src="" 
                        style="width: 100%; height: 100%; border: none;"
                        frameborder="0">
                </iframe>
            </div>
        </div>
    </div>
</div>

<!-- ğŸ”¥ S3 ëª¨ë‹¬ ì´ˆê¸°í™” ìŠ¤í¬ë¦½íŠ¸ -->
<script>
    // í•™ìƒ S3 í´ë” ì—´ê¸° í•¨ìˆ˜
    function openStudentS3Folder(userID) {
        const iframe = document.getElementById('s3BrowserFrame');
        // S3 ë¸Œë¼ìš°ì €ì— í•™ìƒ í´ë” ê²½ë¡œ ì „ë‹¬
        iframe.src = `/s3/browser?initialPath=users/${encodeURIComponent(userID)}/`;
        const modal = new bootstrap.Modal(document.getElementById('s3BrowserModal'));
        modal.show();
    }
    
    // ëª¨ë‹¬ì´ ë‹«í ë•Œ iframe src ì´ˆê¸°í™” (ë©”ëª¨ë¦¬ ì ˆì•½)
    document.getElementById('s3BrowserModal').addEventListener('hidden.bs.modal', function () {
        const iframe = document.getElementById('s3BrowserFrame');
        iframe.src = '';
    });
</script>

<!-- í•™ìƒ ê´€ë¦¬ ì „ìš© ìŠ¤í¬ë¦½íŠ¸ -->
<script src="/js/teacher/student-management.js"></script>