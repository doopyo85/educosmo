<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì—”íŠ¸ë¦¬ í”„ë¡œì íŠ¸ ì„ íƒ</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.5.0/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="/css/styles.css">
    <link rel="stylesheet" href="/css/card_project.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://apis.google.com/js/api.js"></script>
    <script src="/header.js"></script>

    <script>
        const projectType = 'entry';
    </script>

    <style>
        .project-card {
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 15px;
            transition: all 0.3s;
            background: white;
        }

        .project-card:hover {
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            transform: translateY(-2px);
        }

        .project-name {
            font-size: 18px;
            font-weight: bold;
            color: #333;
            margin-bottom: 10px;
        }

        .project-meta {
            font-size: 14px;
            color: #666;
            margin-bottom: 15px;
        }

        .project-actions {
            display: flex;
            gap: 10px;
        }

        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #999;
        }

        .empty-state i {
            font-size: 64px;
            margin-bottom: 20px;
            opacity: 0.3;
        }
    </style>
</head>

<body>
    <%- include('partials/header') %>
        <input type="hidden" id="user-role" value="<%= role %>">
        <input type="hidden" id="user-id" value="<%= userID %>">
        <input type="hidden" id="center-id" value="<%= centerID %>">

        <div class="container mt-5">
            <h1 class="text-center">Entry í”„ë¡œì íŠ¸</h1>
            <p class="text-center">CPE / CPA êµìœ¡ê³¼ì •ì„ ìœ„í•œ Entry ì½˜í…ì¸ ë¥¼ ì„ íƒí•˜ì„¸ìš”.</p>

            <!-- ìƒˆë¡œ ì‹œì‘í•˜ê¸° ë²„íŠ¼ -->
            <div class="text-center mb-4">
                <button id="newProjectBtn" class="btn btn-success btn-lg">
                    <i class="bi bi-plus-circle"></i> ìƒˆë¡œ ì‹œì‘í•˜ê¸°
                </button>
            </div>

            <!-- ğŸ”¥ CPE / CPA êµìœ¡ ì½˜í…ì¸ ë§Œ ì¶œë ¥ -->
            <div id="edu-content">
                <ul class="nav nav-tabs" id="categoryTabs" role="tablist"></ul>
                <div id="content-container" class="tab-content mt-3"></div>
            </div>
        </div>

        <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
        <script src="/js/card_project.js"></script>

        <script>
            // ğŸ”¥ ìƒˆë¡œ ì‹œì‘í•˜ê¸° ë²„íŠ¼
            document.getElementById('newProjectBtn').addEventListener('click', function () {
                console.log('ğŸ¯ ìƒˆë¡œ ì‹œì‘í•˜ê¸° ë²„íŠ¼ í´ë¦­');

                // Entry ì›Œí¬ìŠ¤í˜ì´ìŠ¤ë¡œ ì´ë™ (ìì²´ ì„œë²„)
                window.open('/entry/', '_blank');

                // í•™ìŠµ í™œë™ ê¸°ë¡
                try {
                    fetch('/learning/log', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            action: 'entry_new_project',
                            data: {
                                userID: document.getElementById('user-id').value,
                                timestamp: new Date().toISOString()
                            }
                        })
                    });
                } catch (error) {
                    console.error('ë¡œê·¸ ê¸°ë¡ ì˜¤ë¥˜:', error);
                }
            });

            // ğŸ”¥ í•„ìš”í•œ ê²½ìš° card_project.js ë‚´ë¶€ì—ì„œ loadCPECategories() ë“± í˜¸ì¶œë¨
        </script>
</body>

</html>