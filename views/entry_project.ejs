<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì—”íŠ¸ë¦¬ í”„ë¡œì íŠ¸ ì„ íƒ</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.5.0/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="/css/styles.css">
    <link rel="stylesheet" href="/css/card_project.css">

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://apis.google.com/js/api.js"></script>
    <script src="/header.js"></script>

    <script>
        const projectType = 'entry';
    </script>
</head>

<body>
    <%- include('partials/header') %>
        <input type="hidden" id="user-role" value="<%= role %>">
        <input type="hidden" id="user-id" value="<%= userID %>">
        <input type="hidden" id="center-id" value="<%= centerID %>">

        <div class="container-fluid mt-5" style="max-width: 1700px;">
            <!-- ğŸ”¥ CPE / CPA êµìœ¡ ì½˜í…ì¸ ë§Œ ì¶œë ¥ -->
            <div id="edu-content">
                <div class="d-flex flex-wrap justify-content-between align-items-center mb-3 border-bottom">
                    <!-- íƒ­ ì˜ì—­ -->
                    <ul class="nav nav-tabs border-bottom-0" id="categoryTabs" role="tablist"></ul>

                    <!-- ë²„íŠ¼ ì˜ì—­ -->
                    <div class="action-buttons pb-1">
                        <button id="newProjectBtn" class="btn btn-primary btn-sm rounded-pill px-3">
                            <i class="bi bi-plus-lg"></i> ìƒˆë¡œ ì‹œì‘í•˜ê¸°
                        </button>
                        <a href="https://playentry.org" target="_blank"
                            class="btn btn-outline-success btn-sm rounded-pill px-3 ms-2">
                            <i class="bi bi-box-arrow-up-right"></i> playentry.org
                        </a>
                    </div>
                </div>
                <div id="content-container" class="tab-content mt-4"></div>
            </div>
        </div>

        <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
        <script src="/js/card_project.js"></script>

        <script>
            // ğŸ”¥ ìƒˆë¡œ ì‹œì‘í•˜ê¸° ë²„íŠ¼
            document.getElementById('newProjectBtn').addEventListener('click', function () {
                console.log('ğŸ¯ ìƒˆë¡œ ì‹œì‘í•˜ê¸° ë²„íŠ¼ í´ë¦­');

                // Entry ì›Œí¬ìŠ¤í˜ì´ìŠ¤ë¡œ ì´ë™ (ìì²´ ì„œë²„)
                window.open('/entry/', '_blank');

                // í•™ìŠµ í™œë™ ê¸°ë¡
                try {
                    fetch('/learning/log', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            action: 'entry_new_project',
                            data: {
                                userID: document.getElementById('user-id').value,
                                timestamp: new Date().toISOString()
                            }
                        })
                    });
                } catch (error) {
                    console.error('ë¡œê·¸ ê¸°ë¡ ì˜¤ë¥˜:', error);
                }
            });
        </script>
</body>

</html>