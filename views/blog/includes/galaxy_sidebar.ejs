<style>
    /* Notion-like Sidebar Styles */
    .galaxy-layout {
        display: flex;
        min-height: 100vh;
        overflow: hidden;
    }

    .sidebar {
        width: 260px;
        min-width: 260px;
        background-color: #202020;
        color: #9b9b9b;
        display: flex;
        flex-direction: column;
        border-right: 1px solid #303030;
        transition: width 0.2s;
        /* height: 100vh; */
        /* position: sticky; */
        /* top: 0; */
    }

    .sidebar-header {
        padding: 14px 16px;
        display: flex;
        align-items: center;
        cursor: pointer;
        transition: background 0.1s;
    }

    .sidebar-header:hover {
        background-color: #2c2c2c;
    }

    .profile-icon {
        width: 24px;
        height: 24px;
        background: #a78bfa;
        /* Galaxy Purple */
        color: white;
        border-radius: 4px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: bold;
        font-size: 14px;
        margin-right: 12px;
    }

    .sidebar-menu {
        flex: 1;
        overflow-y: auto;
        padding: 6px 0;
    }

    .menu-item {
        display: flex;
        align-items: center;
        padding: 6px 16px;
        font-size: 14px;
        cursor: pointer;
        text-decoration: none;
        color: inherit;
        transition: background 0.1s;
    }

    .menu-item:hover {
        background-color: #2c2c2c;
        color: #e0e0e0;
    }

    .menu-item i,
    .menu-item svg {
        margin-right: 10px;
        width: 18px;
        text-align: center;
        opacity: 0.8;
    }

    .menu-section-label {
        font-size: 12px;
        font-weight: 600;
        padding: 24px 16px 8px;
        color: #666;
    }

    .new-page-btn {
        margin: 0 10px;
        padding: 6px 10px;
        border-radius: 4px;
        font-size: 13px;
        color: #9b9b9b;
        cursor: pointer;
        display: flex;
        align-items: center;
    }

    .new-page-btn:hover {
        background-color: #2c2c2c;
        color: #e0e0e0;
    }

    .main-content {
        flex: 1;
        height: 100vh;
        overflow-y: auto;
        position: relative;
    }
</style>

<div class="sidebar">
    <!-- User/Blog Profile -->
    <div class="sidebar-header" onclick="location.href='/'">
        <div class="profile-icon">
            <%= blog.title.charAt(0).toUpperCase() %>
        </div>
        <div class="d-flex flex-column text-truncate">
            <span class="text-white text-truncate" style="font-weight: 500; font-size: 14px;">
                <%= blog.title %>
            </span>
            <span style="font-size: 11px;">
                <%= owner.name %>'s Universe
            </span>
        </div>
    </div>

    <!-- Quick Actions -->
    <div class="sidebar-menu">
        <div class="menu-item">
            <i class="bi bi-search"></i>
            <span>Search</span>
        </div>
        <div class="menu-item">
            <i class="bi bi-gear"></i>
            <span>Settings</span>
        </div>

        <% if (user && user.is_logined && owner && user.userID==owner.userID) { %>
            <a href="/write" class="menu-item mt-2">
                <i class="bi bi-plus-circle"></i>
                <span>New Page</span>
            </a>
            <% } %>

                <div class="menu-section-label">PAGES</div>

                <!-- Dynamic Pages List -->
                <% if (locals.sidebarPosts) { %>
                    <% sidebarPosts.forEach(p=> { %>
                        <a href="/p/<%= p.slug %>" class="menu-item text-truncate">
                            <i class="bi bi-file-text"></i>
                            <span class="text-truncate">
                                <%= p.title || 'Untitled' %>
                            </span>
                        </a>
                        <% }); %>
                            <% } %>

                                <a href="/write" class="new-page-btn mt-2">
                                    <i class="bi bi-plus me-2"></i> Add a page
                                </a>
    </div>

    <!-- Bottom Actions -->
    <div class="p-2 border-top border-secondary" style="border-color: #303030 !important;">
        <div class="menu-item">
            <i class="bi bi-trash"></i>
            <span>Trash</span>
        </div>
    </div>
</div>