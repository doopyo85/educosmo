<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- SEO Meta Tags -->
    <title><%= seoData?.title || `${post.title} - ${blog.title}` %></title>
    <meta name="description" content="<%= seoData?.description || post.excerpt || '' %>">
    <meta name="keywords" content="코딩, 프로그래밍, <%= owner.name %>, MyUniverse">
    <meta name="author" content="<%= owner.name %>">

    <!-- Open Graph -->
    <meta property="og:title" content="<%= seoData?.title || post.title %>">
    <meta property="og:description" content="<%= seoData?.description || post.excerpt || '' %>">
    <meta property="og:image" content="<%= seoData?.ogImage || '' %>">
    <meta property="og:url" content="<%= seoData?.url || '' %>">
    <meta property="og:type" content="article">
    <meta property="og:site_name" content="MyUniverse">
    <% if (seoData?.publishedTime) { %>
        <meta property="article:published_time" content="<%= new Date(seoData.publishedTime).toISOString() %>">
    <% } %>
    <% if (seoData?.modifiedTime) { %>
        <meta property="article:modified_time" content="<%= new Date(seoData.modifiedTime).toISOString() %>">
    <% } %>

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="<%= seoData?.title || post.title %>">
    <meta name="twitter:description" content="<%= seoData?.description || post.excerpt || '' %>">
    <meta name="twitter:image" content="<%= seoData?.ogImage || '' %>">

    <!-- Additional SEO -->
    <link rel="canonical" href="<%= seoData?.url || '' %>">
    <meta name="robots" content="index, follow">

    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #6c5ce7;
            --bg-color: #0f1020;
            --text-color: #ffffff;
            --card-bg: #1e1f3a;
        }

        body {
            font-family: 'Noto Sans KR', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            margin: 0;
            line-height: 1.6;
        }

        .header {
            background-image: linear-gradient(to right, #240b36, #c31432);
            padding: 2rem 1rem;
            text-align: center;
        }

        .header h1 {
            margin: 0;
            font-size: 1.5rem;
        }

        .header a {
            color: white;
            text-decoration: none;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 2rem 1rem;
        }

        .post-header {
            margin-bottom: 2rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            padding-bottom: 1rem;
        }

        .post-title {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
        }

        .post-meta {
            color: #aaa;
            font-size: 0.9rem;
        }

        .post-content {
            background: var(--card-bg);
            padding: 2rem;
            border-radius: 12px;
            min-height: 400px;
        }

        .post-content img {
            max-width: 100%;
            border-radius: 8px;
        }

        .footer {
            text-align: center;
            padding: 2rem;
            color: #666;
            margin-top: 2rem;
        }
    </style>
</head>

<body>
    <div class="galaxy-layout">
        <!-- Sidebar -->
        <%- include('includes/galaxy_sidebar') %>

            <!-- Main Content -->
            <div class="main-content">
                <header class="header">
                    <h1><a href="/">
                            <%= blog.title %>
                        </a></h1>
                </header>

                <div class="container">
                    <article class="post">
                        <div class="post-header">
                            <h1 class="post-title">
                                <%= post.title %>
                            </h1>
                            <div class="post-meta">
                                <span>
                                    <%= new Date(post.created_at).toLocaleDateString() %>
                                </span> ·
                                <span>조회 <%= post.view_count %></span>
                            </div>
                        </div>

                        <div class="post-content">
                            <div id="editorjs"></div>
                        </div>
                    </article>
                </div>

                <footer class="footer">
                    <p>&copy; <%= new Date().getFullYear() %>
                            <%= blog.title %>. Powered by MyUniverse.</p>
                </footer>
            </div>
    </div>

    <!-- Editor.js & Plugins -->
    <script src="https://cdn.jsdelivr.net/npm/@editorjs/editorjs@latest"></script>
    <script src="https://cdn.jsdelivr.net/npm/@editorjs/header@latest"></script>
    <script src="https://cdn.jsdelivr.net/npm/@editorjs/list@latest"></script>
    <script src="https://cdn.jsdelivr.net/npm/@editorjs/checklist@latest"></script>
    <script src="https://cdn.jsdelivr.net/npm/@editorjs/image@latest"></script>
    <script src="https://cdn.jsdelivr.net/npm/@editorjs/raw@latest"></script>
    <script src="https://cdn.jsdelivr.net/npm/@editorjs/quote@latest"></script>
    <script src="https://cdn.jsdelivr.net/npm/@editorjs/code@latest"></script>
    <script src="https://cdn.jsdelivr.net/npm/@editorjs/embed@latest"></script>
    <script src="https://cdn.jsdelivr.net/npm/@editorjs/marker@latest"></script>
    <script src="https://cdn.jsdelivr.net/npm/@editorjs/inline-code@latest"></script>

    <script>
        // Render Editor.js in Read-Only Mode
        const contentData = <% - post.content_json ? JSON.stringify(post.content_json) : '{}' %>;

        const editor = new EditorJS({
            holder: 'editorjs',
            readOnly: true,
            tools: {
                header: Header,
                list: List,
                checklist: Checklist,
                image: ImageTool,
                quote: Quote,
                code: CodeTool,
                embed: Embed,
                marker: Marker,
                inlineCode: InlineCode,
            },
            data: contentData,
            onReady: () => {
                console.log('Editor.js is ready to work!');
            }
        });
    </script>
</body>

</html>