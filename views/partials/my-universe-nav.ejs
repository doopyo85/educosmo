<!-- Apple Style Segmented Control -->
<style>
    .segmented-control {
        background: #F2F2F7;
        padding: 4px;
        border-radius: 10px;
        display: inline-flex;
        position: relative;
        margin: 20px 20px 0 20px;
        /* Add margin to separate from header */
    }

    .segment-item {
        position: relative;
        z-index: 1;
    }

    .segment-link {
        display: flex;
        align-items: center;
        padding: 6px 16px;
        font-size: 0.9rem;
        font-weight: 500;
        color: #636366;
        text-decoration: none;
        border-radius: 7px;
        transition: all 0.2s ease;
    }

    .segment-link:hover {
        color: #1c1c1e;
    }

    .segment-link.active {
        background: #FFFFFF;
        color: #000000;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12);
        font-weight: 600;
    }

    .segment-link i {
        margin-right: 6px;
        font-size: 1rem;
    }
</style>

<div class="d-flex justify-content-center w-100 bg-white border-bottom pb-3">
    <% let baseUrl='/my-universe' ; let isStudentView=false; if (locals.student && locals.student.id) {
        baseUrl=`/my-universe/student/${locals.student.id}`; isStudentView=true; } // Determine active tab based on
        variable passed from route or current URL const currentTab=locals.activeTab || '' ; %>
        <div class="segmented-control">
            <div class="segment-item">
                <a href="<%= baseUrl %><%= isStudentView ? '' : '/timeline' %>"
                    class="segment-link <%= currentTab === 'timeline' ? 'active' : '' %>">
                    <i class="bi bi-list-task"></i> 타임라인
                </a>
            </div>
            <div class="segment-item">
                <a href="<%= isStudentView ? `/gallery?userId=${locals.student.userID}` : '/gallery/my' %>"
                    class="segment-link <%= currentTab === 'gallery' ? 'active' : '' %>">
                    <i class="bi bi-grid-fill"></i> 갤러리
                </a>
            </div>
            <div class="segment-item">
                <a href="<%= baseUrl %>/observatory"
                    class="segment-link <%= currentTab === 'observatory' ? 'active' : '' %>">
                    <i class="bi bi-stars"></i> Observatory
                </a>
            </div>
            <div class="segment-item">
                <a href="#" class="segment-link disabled" style="opacity: 0.5; cursor: default;">
                    <i class="bi bi-bar-chart-fill"></i> 대시보드
                </a>
            </div>
            <div class="segment-item">
                <a href="#" class="segment-link disabled" style="opacity: 0.5; cursor: default;">
                    <i class="bi bi-journal-text"></i> 블로그
                </a>
            </div>
        </div>
</div>